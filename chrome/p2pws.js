const a0_0x1fc205=function(){let _0x3819cf=!![];return function(_0x3d70be,_0x5c553){const _0x4ba85f=_0x3819cf?function(){if(_0x5c553){const _0x307d6e=_0x5c553['apply'](_0x3d70be,arguments);return _0x5c553=null,_0x307d6e;}}:function(){};return _0x3819cf=![],_0x4ba85f;};}(),a0_0xcfbff3=a0_0x1fc205(this,function(){const _0x207bdb=function(){const _0x161413=_0x207bdb['constructor']('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x161413['test'](a0_0xcfbff3);};return _0x207bdb();});a0_0xcfbff3();const a0_0x22003c=function(){let _0x34d66b=!![];return function(_0x3c53c8,_0x377bb4){const _0x8fe5d=_0x34d66b?function(){if(_0x377bb4){const _0x1e5072=_0x377bb4['apply'](_0x3c53c8,arguments);return _0x377bb4=null,_0x1e5072;}}:function(){};return _0x34d66b=![],_0x8fe5d;};}();(function(){a0_0x22003c(this,function(){const _0x2020e3=new RegExp('function\x20*\x5c(\x20*\x5c)'),_0x48d788=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i'),_0xa3b105=a0_0x5f4871('init');!_0x2020e3['test'](_0xa3b105+'chain')||!_0x48d788['test'](_0xa3b105+'input')?_0xa3b105('0'):a0_0x5f4871();})();}());class MsjState{constructor(){this['status']='';}['getStatus'](){return this['status'];}['do'](){console['log']('Sin\x20estado');}}class onAccept extends MsjState{constructor(){super(),this['status']='Accept';}['do'](_0x2cbecd,_0x31e096){try{let _0x18daca=JSON['parse'](_0x2cbecd['getData']());new ActionCode(_0x18daca,_0x31e096)['do']();}catch(_0x5966e0){console['log']('Error\x20al\x20realizar\x20estado\x20Accept'),console['log'](_0x5966e0);}}}class onDeny extends MsjState{constructor(){super(),this['status']='Deny';}['do'](){console['log'](this['status']);}['doPost'](_0xe4c152,_0x4b5330){try{_0x4b5330['do'](_0xe4c152,this['status']);}catch(_0x4eebdd){console['log']('Error\x20al\x20realizar\x20accion\x20sobre\x20estado'),console['log'](_0x4eebdd);}}}class onReady extends MsjState{constructor(){super(),this['status']='Ready';}['do'](){console['log'](this['status']);}['doPost'](_0x49557e,_0x13ef7d){try{_0x13ef7d['do'](_0x49557e,this['status']);}catch(_0x52b712){console['log']('Error\x20al\x20realizar\x20accion\x20sobre\x20estado'),console['log'](_0x52b712);}}}class onQueue extends MsjState{constructor(_0x45cdea){super(),this['status']='Queue';}['do'](){console['log'](this['status']);}['doPost'](_0x155287,_0x570b6e){try{_0x570b6e['do'](_0x155287,this['status']);}catch(_0x13d37f){console['log']('Error\x20al\x20realizar\x20accion\x20sobre\x20estado'),console['log'](_0x13d37f);}}}class DataMsj{constructor(_0xc8f431){this['data']=_0xc8f431,this['state']=new MsjState(),this['remoteuser']='',this['type']='bytes',this['mode']='',this['name']='DataMsj',this['dataMsg']=!0x0;}['isDataQueue'](){return this['dataMsg'];}['setDataQueue'](_0x5ef1cb){this['dataMsg']=_0x5ef1cb;}['getName'](){return this['name'];}['setName'](_0x592dbd){this['name']=_0x592dbd;}['changeState'](_0x389e56){this['state']=_0x389e56;}['setRemoteUser'](_0x2c984b){this['remoteuser']=_0x2c984b;}['getRemoteUser'](){return this['remoteuser'];}['getState'](){return this['state'];}['getType'](){return this['type'];}['setType'](_0x1dca50){this['type']=_0x1dca50;}['getData'](){return this['data'];}['getMode'](){return this['mode'];}['setMode'](_0x3b5b02){this['mode']=_0x3b5b02;}['toJson'](){try{let _0x1a83e2=JSON['parse'](this['getData']()),_0x3c1cbe={'type':this['getName'](),'data':this['getData'](),'mode':this['getMode'](),'peersource':_0x1a83e2['peersource']};return JSON['stringify'](_0x3c1cbe);}catch(_0xe9df89){console['log']('Error\x20al\x20convertir\x20objeto\x20a\x20json\x20desde:\x20'+this['getName']()),console['log'](_0xe9df89);}}['actionDefault'](_0x2edbae,_0x29afef){try{this['changeState'](new onQueue()),this['setRemoteUser'](_0x2edbae['peersource']),this['isDataQueue']()&&_0x29afef['getMsjDataAlone']()['push'](this),chrome['notifications']['create']({'type':'basic','iconUrl':chrome['extension']['getURL']('icons/quicknote-48.png'),'title':this['getName']()+'\x20Arrivo\x20contenido\x20de\x20tipo:\x20'+_0x2edbae['type'],'message':this['getName']()+'\x20nuevo\x20dato\x20de\x20peer:\x20'+_0x2edbae['peersource']}),_0x2edbae['mode']&&'testing'==_0x2edbae['mode']&&(_0x29afef['testCommunicaction']['setMessage'](this),_0x29afef['testCommunicaction']['do'](_0x29afef['getUsername'](),_0x29afef['getChannelPeers']()),_0x29afef['setMsjDataLength']());}catch(_0xbc9afa){console['error']('Error\x20al\x20inicair\x20RequestDChannel:\x20',_0xbc9afa);}}['actionAutomatic'](_0x52ff84,_0x26979f){try{return'hybrid'==_0x26979f['getMode']()||'client'==_0x26979f['getMode']()?(this['changeState'](new onAccept()),!0x0):(console['log']('No\x20es\x20un\x20package\x20valido\x20para\x20un\x20'+this['getName']()+'\x20automatico\x20de\x20extension.'),!0x1);}catch(_0x3c2ee4){return console['log']('actionAutomatic\x20:\x20es\x20un\x20package\x20con\x20error\x20\x20'+this['getName']()),console['error']('Error\x20al\x20realizar\x20Actionautomatic:\x20',_0x3c2ee4),!0x1;}}['actionForward'](_0x30f0b6,_0x3c3090){try{return'hybrid'==_0x3c3090['getMode']()||'server'==_0x3c3090['getMode']()?(this['changeState'](new onQueue()),!0x0):(console['log']('\x20No\x20es\x20un\x20modo\x20para\x20el\x20packet\x20valido\x20en\x20una\x20instancia\x20de\x20'+this['getName']()+'\x20extension.'),!0x1);}catch(_0x270293){return console['log']('Error\x20al\x20procesar\x20action\x20forward:\x20'+this['getName']()+'\x20extension.'),console['error'](_0x270293),!0x1;}}['addService'](_0x441b50,_0x20f49){try{'hybrid'==_0x20f49['getMode']()||'server'==_0x20f49['getMode']()?this['changeState'](new onAccept()):console['log']('\x20No\x20es\x20un\x20modo\x20para\x20el\x20packet\x20valido\x20en\x20una\x20instancia\x20de\x20'+this['getName']()+'\x20extension.');}catch(_0x1db564){console['log']('Error\x20al\x20realizar\x20forwardService'),console['error'](_0x1db564);}}}class RequestData extends DataMsj{constructor(_0x200f08){try{super(_0x200f08),this['mode']='',this['name']='Request';let _0x543d17=JSON['parse'](_0x200f08);_0x543d17&&void 0x0!==_0x543d17['mode']&&this['setMode'](_0x543d17['mode']);}catch(_0x23d961){console['log']('Error\x20al\x20crear\x20request\x20data.'),console['log'](_0x23d961);}}['actionDefault'](_0x47d6b8,_0x2500f9){try{this['setDataQueue'](!0x1),super['actionDefault'](_0x47d6b8,_0x2500f9),this['changeState'](new onAccept());let _0x178e32=JSON['parse'](_0x47d6b8['data']);'checkpeer'==_0x178e32['type']&&_0x2500f9['getDataPeerOnlineSS'](_0x178e32['data']['username'])&&_0x2500f9['onAddUser'](new PeerOnline(_0x178e32['data']['id'],_0x178e32['data']['username'],_0x178e32['data']['online'],_0x178e32['data']['p2p'],'',null,_0x178e32['data']['mode'],_0x178e32['data']['spec']));}catch(_0x4b6d9f){console['log']('Error\x20al\x20usar\x20actionDefault\x20Request.'),console['error'](_0x4b6d9f);}}['do'](_0x4b402a){try{this['getState']()['do'](this,_0x4b402a);}catch(_0x50a5a1){console['log']('Error\x20al\x20realizar\x20action\x20sobre\x20un\x20response'),console['log'](_0x50a5a1);}}}class RequestDataExtension extends DataMsj{constructor(_0x53587e){try{super(_0x53587e),this['name']='RequestDataExtension',this['source']='',this['destiny']='',this['extensioname']='',this['extensionId']=null;}catch(_0x4f3a76){console['log']('Error\x20al\x20crear\x20request\x20data\x20extension.'),console['log'](_0x4f3a76);}}['setExtensionId'](_0x3d8e22){this['extensionId']=_0x3d8e22;}['getExtensionId'](){return this['extensionId'];}['setExtensionName'](_0x3cb5a4){this['extensioname']=_0x3cb5a4;}['getExtensionName'](){return this['extensioname'];}['setSourcePeer'](_0x24d198){this['source']=_0x24d198;}['getSourcePeer'](){return this['source'];}['setDestinyPeer'](_0x138e18){this['destiny']=_0x138e18;}['getDestinyPeer'](){return this['destiny'];}['toJson'](){try{JSON['parse'](this['getData']());let _0x32a6b7={'type':'Request','data':JSON['parse'](this['getData']()),'extensioname':this['getExtensionName'](),'id':this['getExtensionId'](),'source':this['source'],'destiny':this['destiny']};return JSON['stringify'](_0x32a6b7);}catch(_0x25489c){console['log']('Error\x20al\x20convertir\x20objeto\x20a\x20json'),console['log'](_0x25489c);}}['actionForward'](_0x5f5a0c,_0x30b9e1){try{return!!super['actionForward'](_0x5f5a0c,_0x30b9e1)&&(this['setSourcePeer'](_0x5f5a0c['source']),this['setDestinyPeer'](_0x5f5a0c['destiny']),this['setExtensionName'](_0x5f5a0c['extensioname']),this['setExtensionId'](_0x5f5a0c['id']),_0x30b9e1['addDataExtension'](this),_0x30b9e1['addMessageExtension'](_0x5f5a0c['extensioname'],JSON['stringify'](_0x5f5a0c)),_0x30b9e1['forwardExtensionPeer'](JSON['stringify'](_0x5f5a0c)),!0x0);}catch(_0x15a12d){return console['error']('Error\x20al\x20realizar\x20ActionDefault\x20Extension:\x20',_0x15a12d),!0x1;}}['createResponse'](_0x5ef02b,_0x177c0c,_0x3c067f){try{let _0x4808c9=new ResponseDataExtension(JSON['stringify'](_0x177c0c));return _0x4808c9['setSourcePeer'](_0x3c067f),_0x4808c9['setDestinyPeer'](_0x5ef02b['source']),_0x4808c9['setExtensionName'](_0x5ef02b['extensioname']),_0x4808c9['setExtensionId'](_0x5ef02b['id']),_0x4808c9;}catch(_0x229639){console['log']('Error\x20al\x20realizar\x20response\x20desde\x20Request:\x20'),console['log'](_0x229639);}}['actionAutomatic'](_0x1cc528,_0x5ba656){try{let _0x38d82a;if(super['actionAutomatic'](_0x1cc528,_0x5ba656)){if(_0x1cc528['data']['querys'])switch(_0x1cc528['data']['querys']['type']){case'services':let _0x1d2162={'services':_0x5ba656['getExtensions'](),'source':_0x5ba656['getUsername'](),'automatic':!0x0,'withoutcheck':!0x0};_0x38d82a=this['createResponse'](_0x1cc528,_0x1d2162,_0x5ba656['getUsername']()),_0x5ba656['sendByDC'](_0x1cc528['source'],_0x38d82a['toJson']());break;case'peers':let _0x34ee3d={'peers':_0x5ba656['getPeersOnline'](),'source':_0x5ba656['getUsername'](),'automatic':!0x0,'withoutcheck':!0x0};_0x38d82a=this['createResponse'](_0x1cc528,_0x34ee3d,_0x5ba656['getUsername']()),_0x5ba656['sendByDC'](_0x1cc528['source'],_0x38d82a['toJson']());}else{this['setSourcePeer'](_0x1cc528['source']),this['setDestinyPeer'](_0x1cc528['destiny']),this['setExtensionName'](_0x1cc528['extensioname']);let _0x5a3a5e=_0x5ba656['getPortIdOfExtension'](_0x1cc528['extensioname']);this['setExtensionId'](_0x5a3a5e),this['do'](_0x5ba656['getPortExternals']()[_0x5a3a5e]);}return!0x0;}return!0x1;}catch(_0x57535e){return console['error']('Error\x20al\x20realizar\x20actionAutomatic\x20Extension:\x20',_0x57535e),!0x1;}}['actionRequest'](_0xad7bec,_0x21ea7e){try{this['actionAutomatic'](_0xad7bec,_0x21ea7e);}catch(_0x1a178c){console['error']('Error\x20al\x20realizar:'+this['getName']()+':\x20',_0x1a178c);}}['do'](_0x5f4b96){try{this['getState']()['do'](this,_0x5f4b96);}catch(_0x523e2d){console['log']('Error\x20al\x20realizar\x20action\x20sobre\x20un\x20response'),console['log'](_0x523e2d);}}}class ResponseDataExtension extends DataMsj{constructor(_0x5b8096){try{super(_0x5b8096),this['name']='ResponseDataExtension',this['source']='',this['destiny']='',this['extensioname']='',this['extensionId']=null;}catch(_0x103e95){console['log']('Error\x20al\x20crear\x20response\x20data\x20extension.'),console['log'](_0x103e95);}}['setExtensionId'](_0x3f8bce){this['extensionId']=_0x3f8bce;}['getExtensionId'](){return this['extensionId'];}['setExtensionName'](_0x46f2ce){this['extensioname']=_0x46f2ce;}['getExtensionName'](){return this['extensioname'];}['setSourcePeer'](_0x5ba084){this['source']=_0x5ba084;}['getSourcePeer'](){return this['source'];}['setDestinyPeer'](_0x411564){this['destiny']=_0x411564;}['getDestinyPeer'](){return this['destiny'];}['toJson'](){try{JSON['parse'](this['getData']());let _0x1f9666={'type':'Response','data':JSON['parse'](this['getData']()),'extensioname':this['getExtensionName'](),'id':this['getExtensionId'](),'source':this['source'],'destiny':this['destiny']};return JSON['stringify'](_0x1f9666);}catch(_0x35f853){console['log']('Error\x20al\x20convertir\x20objeto\x20a\x20json'),console['log'](_0x35f853);}}['actionForward'](_0x3474b3,_0x10333f){try{return!!super['actionForward'](_0x3474b3,_0x10333f)&&(this['setSourcePeer'](_0x3474b3['source']),this['setDestinyPeer'](_0x3474b3['destiny']),this['setExtensionName'](_0x3474b3['extensioname']),this['setExtensionId'](_0x3474b3['id']),_0x10333f['addDataExtension'](this),_0x10333f['addMessageExtension'](_0x3474b3['extensioname'],JSON['stringify'](_0x3474b3)),!0x0);}catch(_0x388851){return console['log']('Error\x20actionForward\x20desde\x20Extension\x20Response:\x20',_0x388851),!0x1;}}['queryService'](){return!0x1;}['actionAutomatic'](_0x403aab,_0x48df7b){try{if(super['actionAutomatic'](_0x403aab,_0x48df7b)){this['setSourcePeer'](_0x403aab['source']),this['setDestinyPeer'](_0x403aab['destiny']),this['setExtensionName'](_0x403aab['extensioname']);let _0x17e4bc=_0x48df7b['getPortIdOfExtension'](_0x403aab['extensioname']);this['setExtensionId'](_0x17e4bc),this['do'](_0x48df7b['getPortExternals']()[_0x17e4bc]);}}catch(_0x38f777){return console['log']('Error\x20actionAutomatic\x20desde\x20Extension\x20Response:\x20',_0x38f777),!0x1;}}['actionResponse'](_0x3395f0,_0x35e2a9){try{this['actionAutomatic'](_0x3395f0,_0x35e2a9);}catch(_0x47bb0d){return console['error']('Error\x20al\x20realizar\x20actionResponse\x20desde\x20'+this['getName']()+':\x20',_0x47bb0d),!0x1;}}['do'](_0x57bd6d){try{this['getState']()['do'](this,_0x57bd6d);}catch(_0x4f4306){console['log']('Error\x20al\x20realizar\x20action\x20sobre\x20un\x20response'),console['log'](_0x4f4306);}}}class ResponseData extends DataMsj{constructor(_0x34afdb){try{super(_0x34afdb),this['mode']='';}catch(_0x3a595d){console['log']('Error\x20al\x20crear\x20response\x20data.'),console['log'](_0x3a595d);}}['do'](_0x2a1fc8){try{this['getState']()['do'](this,_0x2a1fc8);}catch(_0x1fe51c){console['log']('Error\x20al\x20realizar\x20action\x20sobre\x20un\x20response'),console['log'](_0x1fe51c);}}}class ServiceData extends DataMsj{constructor(_0x18518c){try{super(_0x18518c),this['name']='Service';}catch(_0x914678){console['log']('Error\x20al\x20crear\x20response\x20data.'),console['log'](_0x914678);}}['toJson'](){try{let _0x1a0a59=super['toJson'](),_0x406455=JSON['parse'](_0x1a0a59);return _0x406455['type']=this['getName'](),_0x406455['data']=this['getData'](),JSON['stringify'](_0x406455);}catch(_0x4a6d7c){console['log']('Error\x20al\x20convertir\x20objeto\x20a\x20json\x20desde:\x20'+this['getName']()),console['log'](_0x4a6d7c);}}['actionDefault'](_0x3b5360,_0x1f7038){try{this['setDataQueue'](!0x1),super['actionDefault'](_0x3b5360,_0x1f7038),this['changeState'](new onAccept());let _0x194b4e=JSON['parse'](this['getData']());chrome['notifications']['create']({'type':'basic','iconUrl':chrome['extension']['getURL']('icons/quicknote-48.png'),'title':this['getName']()+'\x20Nuevo\x20contenido\x20de\x20tipo:\x20'+_0x3b5360['type']+'\x20Del\x20peer:\x20'+_0x3b5360['peersource'],'message':'Servicio:\x20'+_0x194b4e['name']+'\x20Categoria:\x20'+_0x194b4e['category']+'\x20Descripción:\x20'+_0x194b4e['description']}),_0x1f7038['addServiceOfPeer'](_0x3b5360['peersource'],_0x194b4e);}catch(_0x189040){console['log']('Error\x20al\x20realizar\x20actionDefault'),console['error'](_0x189040);}}}class PChannelState{constructor(_0x1db688){this['name']=_0x1db688;}['getName'](){return this['name'];}['setName'](_0x41949d){this['name']=_0x41949d;}['handleDo'](_0x4fb64){}['operChannel'](_0x379a94,_0x3bec8c,_0x55db9c){}}class PChannelClosedState extends PChannelState{constructor(_0xb41cb7='closed'){super(_0xb41cb7);}['handleDo'](_0x141e92){try{_0x141e92['showMessageConnection']({'title':'Channel\x20WebRTC\x20closed','body':'Canal\x20Cerrado.'}),console['log']('Canal\x20cerrado\x20para:\x20');}catch(_0x3517f6){console['log']('Error\x20al\x20realizar\x20PChannelClosedState:\x20'),console['log'](_0x3517f6);}}['operChannel'](_0x25f3b,_0x2833b2,_0x128c2c){try{console['log']('Error!\x20Attempt\x20to\x20send\x20while\x20connection\x20closed.');}catch(_0x6b820e){console['log']('Error\x20al\x20realizar\x20closed\x20sobre\x20el\x20DataChannel.'),console['error'](_0x6b820e);}}}class PChannelClosingState extends PChannelState{constructor(_0x2c263d='closing'){super(_0x2c263d);}['handleDo'](_0xe4019f){try{console['log']('Cerrando\x20canal...\x20');}catch(_0x23696b){console['log']('Error\x20al\x20realizar\x20PChannelClosingState:\x20'),console['log'](_0x23696b);}}['operChannel'](_0x586684,_0x5526f4,_0x5afa6b){try{console['log']('Attempted\x20to\x20send\x20message\x20while\x20closing:\x20',_0x586684['getUsername']());}catch(_0x22f898){console['log']('Error\x20al\x20realizar\x20clossing\x20sobre\x20DataChannel.'),console['error'](_0x22f898);}}}class PChannelOpenState extends PChannelState{constructor(_0x438902='open'){super(_0x438902);}['handleDo'](_0x2b85ce){try{console['log']('Canal\x20abierto:\x20',_0x2b85ce['getUsername']());}catch(_0x48eb9b){console['log']('Error\x20al\x20realizar\x20PChannelOpenState:\x20'),console['log'](_0x48eb9b);}}['operChannel'](_0x2cf375,_0x194d82,_0x54f070){try{_0x2cf375['getMsjQueue']()['length']>0x0&&console['log']('QUEUE\x20MSG\x20SIN\x20FUNCIONAR'),_0x2cf375['getChannelPeers']()[_0x54f070]&&_0x2cf375['getChannelPeers']()[_0x54f070]['send'](_0x194d82);}catch(_0x4b6276){console['log']('Error\x20al\x20utilizar\x20open\x20sobre\x20datachannel.'),console['error'](_0x4b6276);}}}class PChannelConnectingState extends PChannelState{constructor(_0x55030d='connecting'){super(_0x55030d);}['handleDo'](_0xe1d0b3){try{console['log']('Canal\x20conectando....para:\x20');}catch(_0x230298){console['log']('Error\x20al\x20realizar\x20PChannelConnectingState:\x20'),console['log'](_0x230298);}}['operChannel'](_0x3be80d,_0x57261a,_0x1a326f){try{if(_0x57261a){let _0x58d832={'peer_username':_0x1a326f,'data':_0x57261a};_0x3be80d['getMsjQueue']()['push'](_0x58d832);}}catch(_0x26b403){console['log']('Error\x20al\x20realizar\x20operchannel\x20desde\x20connecteing\x20datachannel'),console['error'](_0x26b403);}}}class ManagerFactoryHandleChannelState{constructor(){this['factory']=null;}['getHandleChannelState'](_0x1a94d3){try{let _0x220288=null;for(let _0x49c9d2=0x0;_0x49c9d2<this['factory']['length'];_0x49c9d2++)if(this['factory'][_0x49c9d2]['getName']()==String(_0x1a94d3)){_0x220288=this['factory'][_0x49c9d2];break;}return _0x220288;}catch(_0x3f770f){console['error']('Error\x20al\x20buscar\x20comando\x20desde\x20menu:\x20',_0x3f770f);}}['getState'](_0x2049dc){try{switch(_0x2049dc){case'closing':this['factory']=new PChannelClosingState();break;case'connecting':this['factory']=new PChannelConnectingState();break;case'closed':this['factory']=new PChannelClosedState();break;case'open':this['factory']=new PChannelOpenState();}return this['factory'];}catch(_0x3c595a){console['log']('Error\x20al\x20realizar\x20getState\x20Channel'),console['log'](_0x3c595a);}}}class PIceConnectionState{constructor(_0x23cafb){this['name']=_0x23cafb,this['data']=null;}['setData'](_0x18ac08){this['data']=_0x18ac08;}['setName'](_0x5685e){this['name']=_0x5685e;}['getName'](){return this['name'];}['handleDo'](_0x1a0bdd,_0x5db442){console['log']('action\x20for\x20state');}['getData'](){return this['data'];}['doCandidate'](_0x58e0c6){}['doSession'](_0x2814ab){}['setP2PInternal'](_0x372e32,_0x5631aa){}}class PIceFailedState extends PIceConnectionState{constructor(_0x350ff1='failed'){super(_0x350ff1);}['handleDo'](_0x21bd38,_0x5d141e){try{_0x21bd38['showMessageConnection']({'title':'Falla\x20ICE\x20WebRTC','body':'Falla\x20usuario\x20remoto:\x20'+_0x5d141e}),_0x21bd38['getPeersOnline']()['setModeSearch'](new searchPolicyUser());let _0x5adfd3=_0x21bd38['getPeersOnline']()['searchPeer'](_0x5d141e);null!==_0x5adfd3&&(_0x21bd38['updateP2PState'](_0x5d141e),_0x21bd38['sendData']({'type':'callCommand','source':_0x21bd38['getUsername'](),'source_id':_0x21bd38['getCliendId'](),'mode':_0x21bd38['getMode'](),'method':'reconnect','target':_0x5adfd3['getUsername'](),'target_id':_0x5adfd3['getId']()}));}catch(_0x4cba81){console['log']('Error\x20al\x20realizar\x20PIceFailedState\x20handleDo'),console['log'](_0x4cba81);}}['doCandidate'](_0x12b478){try{console['log']('El\x20estado\x20no\x20es\x20connected'),console['log'](this['name']);}catch(_0x5d6f74){console['error'](_0x5d6f74),console['log']('Error\x20al\x20realizar\x20candidate\x20sobre\x20failed');}}['setP2PInternal'](_0x14ee84,_0x6d66a7){try{_0x14ee84['getPeersOnline']()['setModeSearch'](new searchPolicyId()),_0x14ee84['getPeersOnline']()['searchPeer'](_0x6d66a7)['setP2P'](!0x1);}catch(_0xa5cace){console['log']('Error\x20al\x20realizar\x20P2P\x20internal,\x20al\x20realizar\x20update\x20desde\x20ice\x20failed.'),console['error'](_0xa5cace);}}}class PIceDisconnectedState extends PIceConnectionState{constructor(_0x1a83fc='disconnected'){super(_0x1a83fc);}['handleDo'](_0x4d801d,_0x555688){try{console['log']('desconectado\x20la\x20conexion'),console['log'](_0x555688),_0x4d801d['getPeersOnline']()['setModeSearch'](new searchPolicyUser()),_0x4d801d['getPeersOnline']()['searchPeer'](_0x555688);}catch(_0xd33de){console['log']('Error\x20al\x20realizar\x20PIceDisconnectedState\x20handleDo'),console['log'](_0xd33de);}}['doCandidate'](_0x49575a){try{console['log']('El\x20estado\x20no\x20es\x20connected'),console['log'](this['name']);}catch(_0x55aaf2){console['error'](_0x55aaf2),console['log']('Error\x20al\x20realizar\x20candidate\x20sobre\x20disconnected');}}['setP2PInternal'](_0x293c4e,_0x884c7d){try{_0x293c4e['getPeersOnline']()['setModeSearch'](new searchPolicyId()),_0x293c4e['getPeersOnline']()['searchPeer'](_0x884c7d)['setP2P'](!0x1);}catch(_0x2ef0f2){console['log']('Error\x20al\x20realizar\x20P2P\x20internal,\x20al\x20realizar\x20update\x20desde\x20ice\x20disconnected.'),console['error'](_0x2ef0f2);}}}class PIceClosedState extends PIceConnectionState{constructor(_0x2f490e='closed'){super(_0x2f490e);}['handleDo'](_0xb3358d,_0x2336d6){try{_0xb3358d['showMessageConnection']({'title':'ICE\x20WebRTC\x20closed','body':'ICE\x20cerrado.'});}catch(_0x323d0f){console['log']('Error\x20al\x20realizar\x20PIceClosedState\x20handleDo'),console['log'](_0x323d0f);}}['doCandidate'](_0x47cf1d){}['setP2PInternal'](_0x9712b4,_0x474c0c){try{_0x9712b4['getPeersOnline']()['setModeSearch'](new searchPolicyId()),_0x9712b4['getPeersOnline']()['searchPeer'](_0x474c0c)['setP2P'](!0x1);}catch(_0xa41999){console['log']('Error\x20al\x20realizar\x20P2P\x20internal,\x20al\x20realizar\x20update\x20desde\x20ice\x20closed.'),console['error'](_0xa41999);}}}class PIceCheckingState extends PIceConnectionState{constructor(_0x453cc7='checking'){super(_0x453cc7);}['handleDo'](_0x151d5e,_0x2d372d){try{_0x151d5e['showMessageConnection']({'title':'Checking\x20ICE\x20state:\x20'+_0x2d372d,'body':'Checking...'});}catch(_0x1ba446){console['log']('Error\x20al\x20realizar\x20PIceCheckingState\x20handleDo'),console['log'](_0x1ba446);}}['doCandidate'](_0x39a181){}['setP2PInternal'](_0x47ae7b,_0x264d4d){try{_0x47ae7b['getPeersOnline']()['setModeSearch'](new searchPolicyId()),_0x47ae7b['getPeersOnline']()['searchPeer'](_0x264d4d)['setP2P'](!0x1);}catch(_0x4aac2e){console['log']('Error\x20al\x20realizar\x20P2P\x20internal,\x20al\x20realizar\x20update\x20desde\x20ice\x20checking.'),console['error'](_0x4aac2e);}}}class PIceNewState extends PIceConnectionState{constructor(_0x3e82ab='new'){super(_0x3e82ab);}['handleDo'](_0x97b81b,_0x265ec3){try{_0x97b81b['showMessageConnection']({'title':'ICE\x20new\x20conection.','body':'Nueva\x20conexión:\x20'+_0x265ec3});}catch(_0x369881){console['log']('Error\x20al\x20realizar\x20PIceNewState\x20handleDo'),console['log'](_0x369881);}}['doCandidate'](_0x163154){}['setP2PInternal'](_0x50a74b,_0x58c322){try{_0x50a74b['getPeersOnline']()['setModeSearch'](new searchPolicyId()),_0x50a74b['getPeersOnline']()['searchPeer'](_0x58c322)['setP2P'](!0x1);}catch(_0x2a5b5c){console['log']('Error\x20al\x20realizar\x20P2P\x20internal,\x20al\x20realizar\x20update\x20desde\x20ice\x20new.'),console['error'](_0x2a5b5c);}}}class PIceConectedState extends PIceConnectionState{constructor(_0x45b719='connected'){super(_0x45b719);}['handleDo'](_0x3ca302,_0x550ba0){try{_0x3ca302['showMessageConnection']({'title':'ICE\x20Online.','body':'ICE\x20conectado:\x20'+_0x550ba0}),_0x3ca302['updateP2PState'](_0x550ba0);}catch(_0x173441){console['log']('Error\x20al\x20realizar\x20PIceConectedState\x20handleDo'),console['log'](_0x173441);}}['doCandidate'](_0x1cd22c){}['doSession'](_0x368c74){try{let _0x1dc4e7=this['getData'](),_0x254ebf={'type':'updatesession','internal':!0x0,'data':{'username':_0x1dc4e7['username'],'id':_0x1dc4e7['id'],'source':_0x1dc4e7['source']}};_0x368c74['sendData'](_0x254ebf);}catch(_0x38f6e1){console['log']('Error\x20Al\x20realizar\x20doSessio\x20sobre\x20estado\x20connected'),console['error'](_0x38f6e1);}}['setP2PInternal'](_0x2a7d07,_0x2cf0d7){try{_0x2a7d07['getPeersOnline']()['setModeSearch'](new searchPolicyId()),_0x2a7d07['getPeersOnline']()['searchPeer'](_0x2cf0d7)['setP2P'](!0x0);}catch(_0x16c108){console['log']('Error\x20al\x20realizar\x20P2P\x20internal,\x20al\x20realizar\x20update\x20connected.'),console['error'](_0x16c108);}}}class ManagerFactoryHandleIceState{constructor(){this['factory']=null;}['getState'](_0x41e590){try{switch(_0x41e590){case'failed':this['factory']=new PIceFailedState(_0x41e590);break;case'disconnected':this['factory']=new PIceDisconnectedState(_0x41e590);break;case'closed':this['factory']=new PIceClosedState(_0x41e590);break;case'checking':this['factory']=new PIceCheckingState(_0x41e590);break;case'new':this['factory']=new PIceNewState(_0x41e590);break;case'connected':this['factory']=new PIceConectedState(_0x41e590);}return this['factory'];}catch(_0x196c9c){console['log']('Error\x20al\x20realizar\x20getState'),console['log'](_0x196c9c);}}}class PPeerConnectionState{constructor(){this['name']='';}['setName'](_0x9c9b11){this['name']=_0x9c9b11;}['getName'](){return this['name'];}['handleDo'](_0x568cd5,_0x4dce94,_0x15994d){console['log']('action\x20for\x20state');}}class PPeerConnectedState extends PPeerConnectionState{constructor(){super(),this['name']='connected';}['handleDo'](_0x317b84,_0x1946db,_0xbf196b){try{console['log']('Conectado\x20a\x20:'+_0x317b84);}catch(_0x2081b6){console['log']('Error\x20al\x20realizar\x20PPeerConnectedState:\x20'),console['log'](_0x2081b6);}}}class PPeerNewState extends PPeerConnectionState{constructor(){super(),this['name']='new';}['handleDo'](_0x19e66e,_0x55c0b5,_0x23498a){try{console['log']('nueva\x20conexión\x20en\x20progreso');}catch(_0xf4c159){console['log']('Error\x20al\x20realizar\x20PPeerNewState:\x20'),console['log'](_0xf4c159);}}}class PPeerDisconnectedState extends PPeerConnectionState{constructor(){super(),this['name']='disconnected';}['handleDo'](_0x59b9f9,_0x5f9e07,_0x2b5d55){try{console['log']('RTC\x20peer\x20desconectado'),_0x2b5d55['getPeersOnline']()['setModeSearch'](new searchPolicyUser());let _0xdb73d3=_0x2b5d55['getPeersOnline']()['searchPeer'](_0x59b9f9);null!==_0xdb73d3&&(_0x2b5d55['getPeersDeleted']()['push'](_0xdb73d3),_0x2b5d55['checkDelete']());}catch(_0x1f7ad9){console['log']('Error\x20al\x20realizar\x20PPeerDisconnectedState:\x20'),console['log'](_0x1f7ad9);}}}class PPeerFailedState extends PPeerConnectionState{constructor(){super(),this['name']='failed';}['handleDo'](_0x3f139e,_0x15f9cf,_0x50bf7b){try{console['log']('falla\x20de\x20conexión\x20con\x20el\x20peer\x20onconnectionstatechange');}catch(_0x4c413c){console['log']('Error\x20al\x20realizar\x20PPeerFailedState:\x20'),console['log'](_0x4c413c);}}}class PPeerClosedState extends PPeerConnectionState{constructor(){super(),this['name']='closed';}['handleDo'](_0x3efd48,_0x1f2d24,_0x4b93ee){try{console['log']('conexion\x20cerrada\x20connectionstate\x20change');}catch(_0x3eda11){console['log']('Error\x20al\x20realizar\x20PPeerClosedState:\x20'),console['log'](_0x3eda11);}}}class ManagerFactoryPeerConnectionState{constructor(){this['list']=[],this['factory']=null;}['addState'](_0x4a088e){this['list']['push'](_0x4a088e);}['getState'](_0x204a39){try{switch(_0x204a39){case'connected':this['factory']=new PPeerConnectedState();break;case'new':this['factory']=new PPeerNewState();break;case'disconnected':this['factory']=new PPeerDisconnectedState();case'failed':this['factory']=new PPeerFailedState();break;case'closed':this['factory']=new PPeerClosedState();}return this['factory'];}catch(_0x3be73c){console['log']('Error\x20al\x20realizar\x20getState'),console['log'](_0x3be73c);}}}class WRTCDataChannel{constructor(){this['datachannel']=null,this['channelState']=null;}['setDataChannel'](_0x59ef6a){this['datachannel']=_0x59ef6a;}['getDataChannel'](){return this['datachannel'];}['onclosing'](_0x457c1a){try{this['datachannel']['onclosing']=function(_0x497131){console['log']('Log\x20onclosing\x20channel');};}catch(_0x433f91){console['error']('Error\x20sobre\x20evento\x20de\x20cierre\x20del\x20canal.'),console['log'](_0x433f91);}}['close'](){try{this['datachannel']['close']();}catch(_0x5f4a51){console['log']('Error\x20al\x20realizar\x20close()\x20en\x20WRTCDataChannel\x20'),console['log'](_0x5f4a51);}}['onclose'](_0x40e3c9){try{let _0x40a7d0=this;this['getDataChannel']()&&(this['getDataChannel']()['onclose']=function(_0x22cf51){_0x40a7d0['handleSendChannelStatusChange'](_0x22cf51,_0x40e3c9);});}catch(_0x439c63){console['log']('Error\x20al\x20realizar\x20onopen\x20sobre\x20datachannel'),console['log'](_0x439c63);}}['onopen'](_0x3bf2ca){try{let _0x2417cc=this;this['getDataChannel']()['onopen']=function(_0x10e39f){_0x2417cc['handleSendChannelStatusChange'](_0x10e39f,_0x3bf2ca);};}catch(_0x23668d){console['log']('Error\x20al\x20realizar\x20onopen\x20sobre\x20datachannel'),console['log'](_0x23668d);}}async['handleSendChannelStatusChange'](_0x101e32,_0x3c1bd4){try{for(let _0x51da65 in _0x3c1bd4['getChannelPeers']())_0x3c1bd4['getChannelPeers']()['hasOwnProperty'](_0x51da65)&&_0x3c1bd4['getChannelPeers']()[_0x51da65]&&(_0x3c1bd4['getChannelPeers']()[_0x51da65]['getState']()?(console['log']('ESTADO\x20CANAL:\x20',_0x3c1bd4['getChannelPeers']()[_0x51da65]['getState']()['getName']()),await _0x3c1bd4['getChannelPeers']()[_0x51da65]['getState']()['handleDo'](_0x3c1bd4)):console['log']('SIN\x20ESTADO\x20PARA\x20CANAL:\x20',_0x51da65));}catch(_0x6fb168){console['log']('Error\x20al\x20realizar\x20onopen\x20sobre\x20datachannel'),console['log'](_0x6fb168);}}['send'](_0x863615){try{this['datachannel']['send'](_0x863615);}catch(_0x18153f){console['log']('Error\x20al\x20realizar\x20send\x20en\x20WRTCDataChannel'),console['log'](_0x18153f);}}['getState'](){try{if(console['log']('Receive\x20channel\x27s\x20status\x20has\x20changed\x20to\x20'+this['getReadyState']()),null!==this['channelState']&&this['channelState']['getName']()===this['getReadyState']())return this['channelState'];if(this['datachannel']){let _0x23798a=new ManagerFactoryHandleChannelState();if(_0x23798a)return this['channelState']=_0x23798a['getState'](this['getReadyState']()),this['channelState'];}return console['log']('Canal\x20aun\x20no\x20establecido'),null;}catch(_0x7946cd){console['log']('Error\x20al\x20realizar\x20cambio\x20de\x20estado\x20desde\x20DataChannel'),console['error'](_0x7946cd);}}['getReadyState'](){try{return null!==this['datachannel']?this['datachannel']['readyState']:null;}catch(_0x218b85){console['log']('Error\x20al\x20relizar\x20readyState\x20en\x20WRTCDataChannel'),console['log'](_0x218b85);}}}class WRTCPeerConnection{constructor(_0x59fb41=null){this['peerconnection']=_0x59fb41?new RTCPeerConnection(_0x59fb41):new RTCPeerConnection(),this['iceState']=null,this['sessionState']=null;}['setRTCPeerConnection'](_0xb93057){this['peerconnection']=_0xb93057;}['getRTCPeerConnection'](){return this['peerconnection'];}['onicecandidate'](_0x5e6404,_0x32337d){try{let _0x4bae08=this;this['getRTCPeerConnection']()['onicecandidate']=function(_0x6b5851){_0x4bae08['handleCandidate'](_0x6b5851,_0x5e6404,_0x32337d);};}catch(_0xd610d){console['log']('Error\x20peerCandidate\x20function\x20handler'),console['log'](_0xd610d);}}['handleCandidate'](_0x4c576f,_0x28b50b,_0x81d07){try{if(_0x4c576f['candidate']){let _0x1847c0,_0x2f678f;try{_0x1847c0=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/,_0x2f678f=_0x1847c0['exec'](_0x4c576f['candidate']['candidate'])[0x1];}catch(_0x5ed1b3){}_0x81d07['setIP'](_0x2f678f),_0x81d07['sendData']({'type':'candidate','candidate':_0x4c576f['candidate'],'target':_0x28b50b,'who':_0x81d07['getUsername'](),'id':_0x81d07['getCliendId'](),'usernameFragment':_0x4c576f['candidate']['usernameFragment'],'ip':_0x2f678f});}else console['log']('HANDLE\x20CANDIDATE:\x20'+_0x28b50b);}catch(_0x4ea80b){console['log']('Error\x20peerCandidate\x20function\x20handler'),console['log'](_0x4ea80b);}}async['createAnswer'](_0x32ab56,_0x4b0a49){try{let _0x356c2e=this;this['getRTCPeerConnection']()['setRemoteDescription'](new RTCSessionDescription(_0x32ab56['offer']))['then'](_0x4e36ce=>_0x356c2e['peerCreateAnswer'](_0x32ab56,_0x4b0a49))['catch'](function(_0x562e1d){console['log']('Error\x20en\x20setRemoteDescription\x20desde\x20promesa\x20create\x20answer'),console['log'](_0x562e1d);});}catch(_0x436d7c){console['log']('Error\x20al\x20realizar\x20createAnswer'),console['error'](_0x436d7c);}}async['peerCreateAnswer'](_0x4831d0,_0x44aba9){try{let _0x53c097=null,_0x216a2b=this;this['getRTCPeerConnection']()['createAnswer']()['then'](_0x54c979=>(_0x53c097=_0x54c979,_0x216a2b['getRTCPeerConnection']()['setLocalDescription'](_0x54c979)))['then'](function(_0x3201d3){_0x44aba9['sendData']({'type':'answer','answer':_0x53c097,'target':_0x4831d0['who'],'who':_0x44aba9['getUsername'](),'id':_0x44aba9['getCliendId'](),'description':_0x216a2b['getLocalDescription']()});})['catch'](_0x5828b3=>{console['log']('Handle\x20error\x20create\x20answer\x20promise\x20('+_0x5828b3+')\x20here.');});}catch(_0x18ef00){console['log']('Error\x20al\x20crear\x20answer'),console['log'](_0x18ef00);}}async['peerCreateOffer'](_0x43699a,_0x1383d4){try{let _0x25ad43=null,_0x51ae09=this;_0x51ae09['getRTCPeerConnection']()['createOffer']({'iceRestart':!0x0})['then'](_0x23b4ab=>(_0x25ad43=_0x23b4ab,_0x51ae09['getRTCPeerConnection']()['setLocalDescription'](_0x23b4ab)))['then'](function(_0x2fb0fc){_0x1383d4['sendData']({'type':'offer','offer':_0x25ad43,'target':_0x43699a['username'],'who':_0x1383d4['getUsername'](),'id':_0x1383d4['getCliendId'](),'description':_0x51ae09['getLocalDescription'](),'natmode':_0x1383d4['isNatEnable']()});})['catch'](_0x31ca5e=>{console['log']('Handle\x20CreateOffer\x20error\x20('+_0x31ca5e+').');});}catch(_0x440aef){console['log']('error\x20al\x20crear\x20oferta'),console['log'](_0x440aef);}}['onclose'](_0x12dc70,_0x5ec0ef){try{this['getRTCPeerConnection']()['onclose']=function(_0x554734){try{console['log']('Usuario\x20:',_0x12dc70),console['log']('Cerro\x20la\x20conexion\x20RTC'),console['log'](_0x554734),console['log']('SESSION\x20STATE:\x20',_0x5ec0ef['getSessionPeers']()[_0x12dc70]['getConnectionState']()['getName']()),console['log']('ICE\x20CONNECTION\x20STATE:\x20',_0x5ec0ef['getSessionPeers']()[_0x12dc70]['getIceConnectionState']()['getName']()),_0x5ec0ef['getPeersOnline']()['setModeSearch'](new searchPolicyUser());let _0x264152=_0x5ec0ef['getPeersOnline']()['searchPeer'](_0x12dc70);_0x5ec0ef['getPeersOnline']()['deletePeer'](_0x264152);}catch(_0x3fb9b4){console['log']('Error\x20al\x20tratar\x20de\x20cerrar\x20RTC:\x20',_0x3fb9b4);}};}catch(_0x5c1070){console['error'](_0x5c1070);}}['onnegotiationneeded'](){try{this['getRTCPeerConnection']()['onnegotiationneeded']=function(_0x5f367e){console['log']('negociacion\x20en\x20puerta');};}catch(_0x5398ee){console['log']('Error\x20onnegotiationneeded'),console['error'](_0x5398ee);}}['onsignalingstatechange'](){try{this['getRTCPeerConnection']()['onsignalingstatechange']=function(){console['log']('señalizacion\x20cambio\x20de\x20estado');};}catch(_0x5106f6){console['log'](_0x5106f6);}}['onconnectionstatechange'](_0x30a171,_0x48c6bf,_0x53baed){try{let _0x4695b0=this;this['getRTCPeerConnection']()['onconnectionstatechange']=function(_0x477d9b){_0x4695b0['getConnectionState']()&&_0x4695b0['getConnectionState']()['handleDo'](_0x30a171,_0x48c6bf,_0x53baed);};}catch(_0x12a820){console['log']('Error\x20al\x20realizar\x20onconnectionstatechange\x20desde\x20Wrapper'),console['error'](_0x12a820);}}['oniceconnectionstatechange'](_0x58ceb1,_0x1d977c,_0x1468a5){try{if(_0x1468a5['getSessionPeers']()[_0x58ceb1]&&null!==_0x1468a5['getSessionPeers']()[_0x58ceb1]){let _0x376701=this;this['getRTCPeerConnection']()['oniceconnectionstatechange']=function(_0x299fe9){_0x376701['getIceConnectionState']()['setData'](_0x1d977c),_0x376701['getIceConnectionState']()['handleDo'](_0x1468a5,_0x58ceb1);};}}catch(_0x228c3c){console['error']('Error\x20peerIceConnectionStatechange:\x20',_0x228c3c);}}['ondatachannel'](_0x259a3d,_0x393e7d){try{let _0x46b975=this;this['getRTCPeerConnection']()['ondatachannel']=function(_0x40e772){try{_0x259a3d['receiveChannel']=_0x40e772['channel'],myPeer['receiveChannel']['onmessage']=function(_0x28a92a){_0x46b975['handleReceiveMessage'](_0x28a92a,_0x259a3d,_0x393e7d);},myPeer['receiveChannel']['onopen']=function(_0x1632cb){_0x46b975['handleReceiveChannelStatusChange'](_0x1632cb,_0x259a3d,_0x393e7d,!0x0);},myPeer['receiveChannel']['onclose']=function(_0x494b4e){_0x46b975['handleReceiveChannelStatusChange'](_0x494b4e,_0x259a3d,_0x393e7d,!0x1);};}catch(_0x58f425){console['log']('Error\x20ondatachannel\x20event\x20sobre\x20WRTCPeerConnection'),console['log'](_0x58f425);}};}catch(_0x604846){console['log']('Error\x20al\x20realizar\x20ondatachannel'),console['log'](_0x604846);}}['handleReceiveChannelStatusChange'](_0x23ee5a,_0xae665,_0x11ed03,_0x55290d){try{_0xae665['receiveChannel']?_0xae665['getSessionPeers']()[_0x11ed03]&&(_0xae665['getSessionPeers']()[_0x11ed03]['getConnectionState']()&&_0xae665['getSessionPeers']()[_0x11ed03]['getIceConnectionState']()?'connected'===_0xae665['getSessionPeers']()[_0x11ed03]['getConnectionState']()['getName']()&&console['log']('RTC\x20esta\x20conectado\x20pero\x20canal\x20esta\x20fuera\x20de\x20linea'):(_0xae665['getSessionPeers']()[_0x11ed03]['getConnectionState']()&&console['log']('ESTADO\x20CONNECTING:\x20'+_0xae665['getSessionPeers']()[_0x11ed03]['getConnectionState']()['getName']()),_0xae665['getSessionPeers']()[_0x11ed03]['getIceConnectionState']()&&console['log']('ESTADO\x20ICE:\x20'+_0xae665['getSessionPeers']()[_0x11ed03]['getIceConnectionState']()['getName']()))):_0xae665['showMessageConnection']({'title':'Estado\x20de\x20canal\x20de\x20comunicación\x20no\x20activo.','body':'El\x20usuario\x20remoto:\x20'+_0x11ed03+'\x20no\x20tiene\x20un\x20canal\x20de\x20comunicación\x20accesible.'});}catch(_0x44abf2){console['log']('Error\x20al\x20utilizar\x20handleReceiveChannelStatusChange\x20desde\x20WRTCPeerConnection'),console['error'](_0x44abf2);}}['handleReceiveMessage'](_0x281cb0,_0x554602){try{let _0x188b1c=JSON['parse'](_0x281cb0['data']);switch(_0x188b1c['type']){case'Request':_0x188b1c['extensioname']?new RequestDataExtension(JSON['stringify'](_0x188b1c))['actionRequest'](_0x188b1c,_0x554602):new RequestData(_0x188b1c['data'])['actionDefault'](_0x188b1c,_0x554602);break;case'Response':_0x188b1c['extensioname']?new ResponseDataExtension(JSON['stringify'](_0x188b1c))['actionResponse'](_0x188b1c,_0x554602):new ResponseData(_0x188b1c['data'])['actionDefault'](_0x188b1c,_0x554602);}}catch(_0x7a6f73){console['log']('Falla\x20Handle\x20Receive\x20Message'),console['error'](_0x7a6f73);}}['close'](){try{this['peerconnection']['close'](),this['stateIce']=null;}catch(_0x26064b){console['log']('Error\x20al\x20utilizar\x20close'),console['log'](_0x26064b);}}['getIceConnectionState'](){try{if(this['iceState']&&this['iceState']['getName']()===this['peerconnection']['iceConnectionState'])return this['iceState'];let _0x7f4154=new ManagerFactoryHandleIceState();return this['iceState']=_0x7f4154['getState'](this['peerconnection']['iceConnectionState']),this['iceState'];}catch(_0x5f3b7f){console['log']('Error\x20al\x20utilizar\x20getIceConnectionState'),console['log'](_0x5f3b7f);}}['getConnectionState'](){try{if(this['sessionState']&&this['sessionState']['getName']()===this['peerconnection']['connectionstate'])return this['sessionState'];let _0x3214b5=new ManagerFactoryPeerConnectionState();return this['sessionState']=_0x3214b5['getState'](this['peerconnection']['connectionstate']),this['sessionState'];}catch(_0x5ddd2d){console['log'](_0x5ddd2d);}}['getLocalDescription'](){return this['peerconnection']['localDescription'];}}class ClientConectionWS{constructor(_0x9e0ca){try{this['connection'],this['server_url']=_0x9e0ca,this['timerId']=0x0,this['timerIdReconnect']=0x0;}catch(_0x350c9f){console['log']('Error\x20al\x20conectar\x20con\x20servidor\x20de\x20senalizacion'),console['log'](_0x350c9f);}}['conectar'](){try{return new Promise((_0x3af3cf,_0x3fac98)=>{let _0x17fea2=new WebSocket(this['server_url']);return null!==_0x17fea2?(_0x3af3cf(_0x17fea2),0x0):(_0x3fac98('Error\x20al\x20realizar\x20conexion\x20via\x20WebSocket'),-0x1);});}catch(_0x293af0){console['log']('Error\x20al\x20realizar\x20conexion\x20via\x20socket');}}['onError'](_0x3bc0e6){try{console['log']('Error\x20sobre\x20la\x20connection\x20socket');}catch(_0x15985f){console['log']('Error\x20sobre\x20la\x20connection\x20socket'),console['log'](_0x15985f);}}['getServerUrl'](){return this['server_url'];}['getConnection'](){return this['connection'];}['getStateSocket'](){return this['connection']?this['connection']['readyState']:-0x1;}['setConnection'](_0x54043f){this['connection']=_0x54043f;}['onEventConnect'](_0x16316d){return _0x16316d(this);}['sendData'](_0x544a92){try{let _0x3fd50b=this['connection'];null!=_0x3fd50b&&'unavailable'!=typeof _0x3fd50b?_0x3fd50b['send'](JSON['stringify'](_0x544a92)):console['log']('No\x20hay\x20coneccion\x20aparente\x20con\x20el\x20servidor');}catch(_0x132491){console['log']('Error\x20en\x20socket\x20WS'),console['log'](_0x132491);}}['keepAlive'](_0x3cb01f,_0x141628){try{let _0x1dab9c=this;if(null!=_0x3cb01f&&'unavailable'!=typeof _0x3cb01f){if(0x1===_0x3cb01f['readyState']){let _0x5408d6={'type':'keepAlive'};_0x141628['sendData'](_0x5408d6);}this['timerId']=setTimeout(function(){_0x1dab9c['keepAlive'](_0x3cb01f,_0x141628);},0x4e20);}}catch(_0x5d0312){console['log']('Error\x20al\x20realizar\x20KeepAlive\x20desde\x20connection.'),console['log'](_0x5d0312);}}['pollingReconnect'](_0x474cd2,_0x37f4eb){try{let _0x4fa9f3=this;if(null!=_0x474cd2&&'unavailable'!=typeof _0x474cd2){if(0x3===_0x474cd2['readyState']){console['log']('Desconectado\x20del\x20servidor');try{_0x37f4eb['connectSignaServer']();}catch(_0x303e1a){console['log']('Falla\x20al\x20realizar\x20conexion\x20con\x20el\x20servidor\x20señalizador');}}else console['log']('Estado\x20de\x20la\x20conexion:\x20'+_0x474cd2['readyState']),this['timerIdReconnect']=setTimeout(function(){_0x4fa9f3['pollingReconnect'](_0x474cd2,_0x37f4eb);},0x4e20);}}catch(_0x5b1da0){}}['cancelKeepAlive'](_0x470adb){clearTimeout(_0x470adb);}async['down'](_0x1e4f45,_0x1be57f){try{let _0x1a9049=this['getConnection']();switch(await _0x1a9049['close'](),_0x1e4f45['setConnection'](null),_0x1be57f){case'all':_0x1e4f45['clearSessionsPeers'](),_0x1e4f45['clearChannelPeers'](),_0x1e4f45['getPeersOnline']()['clearCollection']();}}catch(_0x2e16ef){console['log']('Error\x20al\x20realizar\x20Down');}}['startConnect'](_0x52d756){let _0x6a9b68=this['getConnection'](),_0x55ddba=this;_0x6a9b68['onerror']=function(_0xbb93b6){console['log']('Error\x20sobre\x20la\x20conecion\x20del\x20socket'),console['error']('Socket\x20encountered\x20error:\x20',_0xbb93b6['message'],'Closing\x20socket'),_0x6a9b68['close']();},_0x6a9b68['onclose']=function(_0x1291e9){try{console['log']('desconection\x20server\x20signaling..'),_0x55ddba['cancelKeepAlive'](_0x55ddba['timerId']),_0x55ddba['pollingReconnect'](_0x6a9b68,_0x52d756);}catch(_0xf401a5){console['log']('No\x20puede\x20ejecutar\x20la\x20orden\x20de\x20cancelacion\x20keepAlive'),console['log'](_0xf401a5);}},_0x6a9b68['onopen']=function(){try{_0x55ddba['cancelKeepAlive'](_0x55ddba['timerIdReconnect']);}catch(_0x7befa4){console['log']('Falla\x20al\x20cancelar\x20timer\x20de\x20re-conexion');}console['log']('Login\x20desde\x20socket'),console['log']('iniciando\x20login'),-0x1==_0x52d756['getCliendId']()?_0x55ddba['sendData']({'type':'login','name':_0x52d756['getUsername'](),'mode':_0x52d756['getMode']()}):(console['log']('enviando\x20reconnect\x20desde\x20extension:\x20'+_0x52d756['getCliendId']()),_0x55ddba['sendData']({'type':'reconnect','clientID':_0x52d756['getCliendId'](),'username':_0x52d756['getUsername'](),'mode':_0x52d756['getMode']()}));},_0x6a9b68['onmessage']=function(_0x464812){let _0x2f912a=JSON['parse'](_0x464812['data']);try{_0x52d756['rcvSignalMessage'](_0x2f912a,_0x55ddba);}catch(_0x5e8105){console['log']('Error\x20al\x20procesar\x20onmessage\x20sobre\x20WebSocket');}};}}var onfly=!0x1;function getGeo(){return'geolocation'in navigator;}async function getGeoCoord(){try{let _0x111d0d={'lat':0x0,'long':0x0};return getGeo()&&await navigator['geolocation']['getCurrentPosition'](_0x407534=>{_0x111d0d['lat']=_0x407534['coords']['latitude'],_0x111d0d['long']=_0x407534['coords']['longitude'];}),_0x111d0d;}catch(_0x4d38ea){console['log'](_0x4d38ea);}}class PeerOnline{constructor(_0x3067f6,_0x43dce8,_0x13d088,_0x3ca534,_0x13f730=null,_0x4e7808=null,_0xa739c4,_0x309be2=null){this['id']=_0x3067f6,this['username']=_0x43dce8,this['online']=_0x13d088,this['p2p']=_0x3ca534,this['ip']=_0x13f730,this['response']=_0x4e7808,this['mode']=_0xa739c4,this['spec']=_0x309be2;}['equals'](_0x587487){return _0x587487['username']==this['username']&&_0x587487['id']==this['id'];}['getUsername'](){return this['username'];}['getId'](){return this['id'];}['getMode'](){return this['mode'];}['getSpec'](){return this['spec'];}['getOnline'](){return this['online'];}['getP2P'](){return this['p2p'];}['getIP'](){return this['ip'];}['setUsername'](_0x4ceb90){this['username']=_0x4ceb90;}['setId'](_0x2619de){this['id']=_0x2619de;}['setMode'](_0x34177c){this['mode']=_0x34177c;}['setSpec'](_0x8b757f){this['spec']=_0x8b757f;}['setOnline'](_0x45282e){this['online']=_0x45282e;}['setP2P'](_0xb87f5b){this['p2p']=_0xb87f5b;}['setIP'](_0xe51765){this['ip']=_0xe51765;}}class searchPolicy{constructor(){this['collection']=null;}['setCollection'](_0x5d8222){this['collection']=_0x5d8222;}['search'](_0x7eb8cb){}}class searchPolicyUser extends searchPolicy{constructor(){super();}['search'](_0x3f922c){let _0x4bf314=null;for(let _0x56b005=0x0;_0x56b005<this['collection']['length'];_0x56b005++)if(this['collection'][_0x56b005]['getUsername']()==_0x3f922c){_0x4bf314=this['collection'][_0x56b005];break;}return _0x4bf314;}}class searchPolicyId extends searchPolicy{constructor(){super();}['search'](_0xb15080){let _0x402369=null;for(let _0x5153d9=0x0;_0x5153d9<this['collection']['length'];_0x5153d9++)if(this['collection'][_0x5153d9]['getId']()===_0xb15080){_0x402369=this['collection'][_0x5153d9];break;}return _0x402369;}}class CollectionPeers{constructor(){this['collection']=[],this['search_strategy']=null;}['clearCollection'](){this['collection']=[];}['addPeer'](_0x501aeb){this['collection']['push'](_0x501aeb);}['deletePeer'](_0x3afa83){return this['collection']=this['collection']['filter'](_0x5b59d9=>_0x5b59d9['getUsername']()!==_0x3afa83['getUsername']()),this['collection'];}['setModeSearch'](_0x11ff85){this['search_strategy']=_0x11ff85,this['search_strategy']['setCollection'](this['collection']);}['searchPeer'](_0x227e5d){return this['search_strategy']['search'](_0x227e5d);}['getCopyCollection'](){return JSON['parse'](JSON['stringify'](this['collection']));}['setCollection'](_0x3924c6){Array['isArray'](_0x3924c6)&&(this['collection']=_0x3924c6);}['getCollection'](){return this['collection'];}['getCant'](){return this['collection']['length'];}}class BrowserData{constructor(){this['language']=navigator['language'],this['networkInformation']=navigator['connection'],this['memory']=navigator['deviceMemory'],this['platform']=navigator['platform'],this['oscpu']=navigator['oscpu'],this['plugins']=navigator['plugins'],this['geo']=getGeoCoord();}['setCoord'](){this['geo']=this['getGeoCoord']();}['getPlugins'](){return this['plugins']=navigator['plugins'],this['plugins'];}['getCPU'](){return this['oscpu'];}['getPlatform'](){return this['platform'];}['getMemory'](){return this['memory']=navigator['deviceMemory'],this['memory'];}}class CommandMessage{constructor(_0x225048){this['name']=_0x225048;}['getName'](){return this['name'];}['execute'](_0x42d1a3=null,_0x12221b=null,_0x293f67=null,_0x546557){console['log']('Implementar');}}class CommandManager extends CommandMessage{constructor(_0xd1bfbf){super(_0xd1bfbf),this['commands']=[];}['addCommand'](_0x380199){this['commands']['push'](_0x380199);}['execute'](_0x5eb97b=null,_0x7a9592=null,_0x857a2e=null,_0x3cedf7){console['log']('Implementar');}['getCommand'](_0x512d53){try{let _0x2ce19e=null;for(let _0xbf6e4c=0x0;_0xbf6e4c<this['commands']['length'];_0xbf6e4c++)if(this['commands'][_0xbf6e4c]['getName']()==String(_0x512d53)){_0x2ce19e=this['commands'][_0xbf6e4c];break;}return _0x2ce19e;}catch(_0x2de361){console['error']('Error\x20al\x20buscar\x20comando:\x20',_0x2de361);}}}class CommandActionAdd extends CommandMessage{constructor(_0x2ae59d){super(_0x2ae59d);}['execute'](_0x29fd1b,_0x6a7c06,_0xaf39e1=null,_0xec7b5e){try{_0x6a7c06['addActions'](_0x29fd1b['action']);}catch(_0x24df33){console['error']('Error\x20al\x20ejecutar\x20command\x20ActionAdd.');}}}class CommandAddExtension extends CommandMessage{constructor(_0x1a9093){super(_0x1a9093);}['execute'](_0xcd87d7,_0x10105a,_0x11dab6=null,_0x18b590){try{_0x10105a['addExtension'](_0xcd87d7);}catch(_0x39e01d){console['error']('Erro\x20al\x20ejecutar\x20command\x20AddExtension');}}}class CommandSendDataToPeer extends CommandMessage{constructor(_0x2fffe8){super(_0x2fffe8);}['execute'](_0x27bbae,_0x591f81,_0xc17c92=null,_0x253052){try{let _0xed6148={'type':'app','protocol':_0x27bbae['service'],'data':_0x27bbae['data']};_0x591f81['getChannelPeers']()[_0x27bbae['peer_remoto']]['send'](JSON['stringify'](_0xed6148));}catch(_0x29fdf4){console['error']('Error\x20al\x20ejecutar\x20command\x20senddatapeer');}}}class CommandRequest extends CommandMessage{constructor(_0x148130){super(_0x148130);}['execute'](_0x1fb5cb,_0x593fe8,_0x2f367d,_0x25d37d){try{if(_0x593fe8['existExtension'](_0x1fb5cb['extensioname'])){if(_0x1fb5cb['source']=_0x593fe8['getUsername'](),'alone'==_0x593fe8['getMode']()){let _0x4a18bf=new RequestDataExtension(JSON['stringify'](_0x1fb5cb));_0x4a18bf['changeState'](new onAccept()),_0x4a18bf['setSourcePeer'](_0x1fb5cb['source']),_0x4a18bf['setDestinyPeer'](_0x1fb5cb['destiny']),_0x4a18bf['setExtensionName'](_0x1fb5cb['extensioname']),_0x4a18bf['setExtensionId'](_0x1fb5cb['id']),_0x4a18bf['do'](_0x2f367d);}else'hybrid'==_0x593fe8['getMode']()||'client'==_0x593fe8['getMode']()?_0x25d37d(_0x1fb5cb['destiny'],JSON['stringify'](_0x1fb5cb)):console['log']('No\x20existe\x20la\x20modalidad\x20de\x20request\x20de\x20uso\x20en\x20este\x20modo\x20de\x20Peer.');}else console['log']('Extension\x20no\x20existe.');}catch(_0x50a8a6){console['error']('Error\x20al\x20ejecutar\x20command\x20request');}}}class CommandResponse extends CommandMessage{constructor(_0x55f10d){super(_0x55f10d);}['execute'](_0x52615b,_0x221113,_0x26c59e,_0x4b0e0b){try{if(_0x221113['existExtension'](_0x52615b['extensioname'])){if(_0x52615b['source']=_0x221113['getUsername'](),'alone'==_0x221113['getMode']()){let _0x1e1624=new ResponseDataExtension(JSON['stringify'](_0x52615b));_0x1e1624['changeState'](new onAccept()),_0x1e1624['setSourcePeer'](_0x52615b['source']),_0x1e1624['setDestinyPeer'](_0x52615b['destiny']),_0x1e1624['setExtensionName'](_0x52615b['extensioname']),_0x1e1624['setExtensionId'](_0x52615b['id']),_0x1e1624['do'](_0x26c59e);}else'hybrid'==_0x221113['getMode']()||'server'==_0x221113['getMode']()?_0x4b0e0b(_0x52615b['destiny'],JSON['stringify'](_0x52615b)):console['log']('No\x20hay\x20un\x20modo\x20valido\x20para\x20response\x20en\x20el\x20peer.');}else console['log']('Extension\x20no\x20existe.');}catch(_0x474973){console['error']('Error\x20al\x20ejecutar\x20command\x20response');}}}class CommandgetPeerName extends CommandMessage{constructor(_0x54970e){super(_0x54970e);}['execute'](_0x3d313c,_0x52ea45,_0x5aa639,_0x108ded){try{let _0x4d0fe9={'type':'PeerName','name':_0x52ea45['getUsername']()};_0x5aa639['postMessage'](JSON['stringify'](_0x4d0fe9));}catch(_0x3f285f){console['error']('Error\x20al\x20ejecutar\x20PeerName');}}}class CQuery{constructor(_0xd12177){this['name']=_0xd12177,this['parameters']={};}['setName'](_0xcfbb59){this['name']=_0xcfbb59;}['getName'](){return this['name'];}['setParameter'](_0x4ef935,_0x3dd32d){this['parameters'][_0x4ef935]=_0x3dd32d;}['getParameters'](_0x3913e8){return this['parameters'][_0x3913e8];}['getAll'](){return this['parameters'];}}class CQueryPeers extends CQuery{constructor(_0x3b68eb,_0x60657b){super(_0x3b68eb),this['protocol']={},this['setParameter']('peers','getPeersOnline');}['setProtocol'](_0xe89134){this['protocol']=_0xe89134;}['getProtocol'](){return this['protocol'];}['sendQuery'](_0x127fe1,_0xa1da0a){try{let _0x2973d0=this['getProtocol'](),_0x16e028=_0xa1da0a[this['getParameters'](_0x2973d0['keys']['query'])]()['getCollection'](),_0x32b367=[];for(let _0x3145d9 in _0x16e028)_0x16e028['hasOwnProperty'](_0x3145d9)&&_0x16e028[_0x3145d9]['getP2P']()&&_0x32b367['push'](_0x16e028[_0x3145d9]);let _0x3d5c12={'type':'responseQuery','data':{'peers':_0x32b367,'id':_0xa1da0a['getUsername']()},'method':this['getName']()};_0x127fe1['postMessage'](JSON['stringify'](_0x3d5c12));}catch(_0x562d9b){console['log']('Falla\x20el\x20envio\x20de\x20CQueryRequest:\x20'+this['getName']()),console['error'](_0x562d9b);}}}class CQueryService extends CQuery{constructor(_0x552eca,_0x37194e){super(_0x552eca),this['protocol']={},this['setParameter']('services','getServicesPeers');}['setProtocol'](_0x94e500){this['protocol']=_0x94e500;}['getProtocol'](){return this['protocol'];}['sendQuery'](_0x4f7ebf,_0x497f08){try{let _0x20ae44=this['getProtocol'](),_0x2bf433={'type':'responseQuery','data':{'services':_0x497f08[this['getParameters'](_0x20ae44['keys']['query'])](),'id':_0x497f08['getUsername']()},'method':this['getName']()};_0x4f7ebf['postMessage'](JSON['stringify'](_0x2bf433));}catch(_0x4dae82){console['log']('Falla\x20el\x20envio\x20de\x20CQueryRequest:\x20'+this['getName']()),console['error'](_0x4dae82);}}}class CommandgetQueryExtension extends CommandMessage{constructor(_0x3da2e5){super(_0x3da2e5),this['querys']=[],this['addQuery'](new CQueryPeers('peers')),this['addQuery'](new CQueryService('services'));}['addQuery'](_0x5b50a4){this['querys']['push'](_0x5b50a4);}['getQuery'](_0x1b1213){try{let _0x7e5f6b=null;for(let _0x1df2b6=0x0;_0x1df2b6<this['querys']['length'];_0x1df2b6++)if(this['querys'][_0x1df2b6]['getName']()==String(_0x1b1213)){_0x7e5f6b=this['querys'][_0x1df2b6];break;}return _0x7e5f6b;}catch(_0x126f25){console['error']('Error\x20al\x20buscar\x20query:\x20',_0x126f25);}}['execute'](_0x102656,_0x4d6f6e,_0x7f299f,_0x15e622){try{if(_0x4d6f6e['existExtension'](_0x102656['extensioname'])){let _0x5a7e63=this['getQuery'](_0x102656['keys']['query']);_0x5a7e63&&(_0x5a7e63['setProtocol'](_0x102656),_0x5a7e63['sendQuery'](_0x7f299f,_0x4d6f6e));}}catch(_0x1499ee){console['error']('Error\x20al\x20ejecutar\x20command\x20queryextension');}}}class CommandgetShowPopup extends CommandMessage{constructor(_0x2d53ca){super(_0x2d53ca);}['execute'](_0x511ab1,_0xaa8579,_0x3ab207,_0x5b1827){try{let _0x537f2c=new PanelScript(_0x511ab1['data']['url']);_0x537f2c['setMode']('popup');let _0x4a425b=_0x537f2c['createWindow']();chrome['windows']['create'](_0x4a425b,function(){chrome['runtime']['lastError']?console['log']('\x20Error\x20show\x20popup'):console['log']('Item\x20created\x20successfully');});}catch(_0xaeb79b){console['error']('Error\x20al\x20ejecutar\x20show\x20popup');}}}class ActionType{constructor(_0x677cbc){this['dataobj']=''==_0x677cbc||null==_0x677cbc||'undefined'==_0x677cbc?null:_0x677cbc,this['type']='';}['do'](_0x84b37e){try{console['log']('Action\x20con\x20puerto:\x20'),console['log']('manipulacion\x20de\x20dataObj:\x20');}catch(_0x532708){console['log']('Action\x20no\x20funcional\x20para\x20este\x20tipo'),console['log'](_0x532708);}}}class AScript extends ActionType{constructor(_0x4154a7){super(_0x4154a7),this['type']='script';}['do'](_0x3cef6e){try{_0x3cef6e['postMessage']({'type':'execjs','data':this['dataobj']['data']});}catch(_0x21125a){console['log']('Error\x20al\x20realizar\x20accion\x20AScript.'),console['log'](_0x21125a);}}}class ADomHmtl extends ActionType{constructor(_0x2539b5){super(_0x2539b5),this['type']='domhtml';}['do'](_0x43b0cf){try{_0x43b0cf['postMessage']({'type':'domcs','data':this['dataobj']['data']});}catch(_0x47192d){console['log'](_0x47192d);}}}class builderAction{constructor(){console['log']('constructor\x20base');}}class builderScript extends builderAction{constructor(_0x39953f){super(),this['odata']=_0x39953f;}['getScript'](){try{if(console['log']('buildscript\x20creacion\x20de\x20AScript.'),'script'==this['odata']['type'])return new AScript(this['odata']);}catch(_0x18db7a){console['log']('error\x20al\x20construir\x20script\x20object'),console['log'](_0x18db7a);}}}class builderDomHtml extends builderAction{constructor(_0x35d0b7){super(),this['odata']=_0x35d0b7;}['getDomHtml'](){try{if(console['log']('buildomhtml\x20creacion\x20de\x20ADomHmtl.'),'domhtml'==this['odata']['type'])return new ADomHmtl(this['odata']);}catch(_0x3c3ee0){console['log']('error\x20al\x20construir\x20script\x20object'),console['log'](_0x3c3ee0);}}}class ActionCode{constructor(_0x2c6dbe,_0x14d975){this['portToCS']=_0x14d975,this['dataobj']=_0x2c6dbe;}['do'](){try{switch(this['dataobj']['type']){case'loadJson':break;case'script':chrome['notifications']['create']({'type':'basic','iconUrl':chrome['extension']['getURL']('icons/quicknote-48.png'),'title':'Accept\x20script','message':'Execute\x20local\x20script'}),console['log']('Action\x20code:');let _0x365faf=new builderScript(this['dataobj']);console['log']('buildscript\x20objecto'),_0x365faf['getScript']()['do'](this['portToCS']);break;case'url':chrome['notifications']['create']({'type':'basic','iconUrl':chrome['extension']['getURL']('icons/quicknote-48.png'),'title':'Accept\x20url','message':'Save\x20url'});break;case'domhtml':chrome['notifications']['create']({'type':'basic','iconUrl':chrome['extension']['getURL']('icons/quicknote-48.png'),'title':'Accept\x20HTML\x20DOM','message':'Save\x20DOM'}),console['log']('Action\x20code:'),new builderDomHtml(this['dataobj'])['getDomHtml']()['do'](this['portToCS']);break;case'Request':if(this['dataobj']['extensioname']){console['log']('Aceptar\x20request\x20de\x20la\x20extension\x20para\x20ser\x20procesado.');let _0x162a20={'type':'AcceptRequest','data':this['dataobj']};this['portToCS']['postMessage'](JSON['stringify'](_0x162a20));}else console['log']('Solo\x20se\x20aceptan\x20request\x20de\x20extensiones');break;case'Response':if(this['dataobj']['extensioname']){console['log']('Aceptar\x20response\x20de\x20la\x20extension\x20para\x20ser\x20procesado.');let _0x3cdb24={'type':'AcceptResponse','data':this['dataobj']};this['portToCS']['postMessage'](JSON['stringify'](_0x3cdb24));}else console['log']('Solo\x20se\x20aceptan\x20request\x20de\x20extensiones');}}catch(_0x1e92dd){console['log']('Error\x20al\x20realizar\x20Action\x20code\x20DO.'),console['log'](_0x1e92dd);}}}class PanelScript{constructor(_0x42f824){this['url_resource']=chrome['extension']['getURL'](_0x42f824),this['modePanel']='';}['setUrl'](_0x4c88aa){this['url_resource']=_0x4c88aa;}['setMode'](_0x40f3bf){this['modePanel']=_0x40f3bf;}['createWindow'](){try{let _0x470fa7;switch(this['modePanel']){case'popup':_0x470fa7={'type':'popup','url':this['url_resource'],'height':0x15e,'width':0x12c},console['log']('iniciando\x20popup');}return _0x470fa7;}catch(_0x43792c){console['log']('Error\x20al\x20generar\x20json\x20de\x20window'),console['log'](_0x43792c);}}['show'](){try{console['log']('Acceso\x20open\x20windows\x20panel\x20script'),console['log']('URL:\x20'+this['url_resource']),''==this['modePanel']?chrome['tabs']['create']({'url':this['url_resource']}):console['log']('solo\x20create\x20tabs');}catch(_0x6f6398){console['log'](_0x6f6398);}}['close'](){}}class POperationMessage{constructor(_0x51b8cb){this['name']=_0x51b8cb;}['setName'](_0x5ac409){this['name']=_0x5ac409;}['getName'](){return this['name'];}['operation'](_0x25a07d,_0x14fbad,_0x4f9301){}}class POperationLogin extends POperationMessage{constructor(_0x2e56f7){super(_0x2e56f7);}['operation'](_0x45b2f0,_0x1b9c73,_0x27abd6){try{if(_0x45b2f0['success']){let _0x412e78=new BrowserData();_0x27abd6['setConnected'](),_0x27abd6['setClientId'](_0x45b2f0['id']),_0x27abd6['sendData']({'type':'broadcast','username':_0x27abd6['getUsername'](),'id':_0x27abd6['getCliendId'](),'mode':_0x27abd6['getMode'](),'spec':{'browser':_0x412e78}}),_0x1b9c73['keepAlive'](_0x1b9c73['getConnection'](),_0x27abd6);}}catch(_0x15c848){console['log']('Error\x20al\x20realizar\x20POperationLogin:\x20'),console['log'](_0x15c848);}}}class POperationUpdateConnection extends POperationMessage{constructor(_0xd3412d){super(_0xd3412d);}['operation'](_0x12dfe6,_0x524fe2,_0x18abb4){try{_0x18abb4['setConnected'](),_0x18abb4['sendData']({'type':'broadcast','username':_0x18abb4['getUsername'](),'id':_0x18abb4['getCliendId'](),'mode':_0x18abb4['getMode']()}),_0x524fe2['keepAlive'](_0x524fe2['getConnection'](),_0x18abb4);}catch(_0x2673be){console['log']('Error\x20al\x20realizar\x20POperationUpdateConnection:\x20'),console['log'](_0x2673be);}}}class POperationOffer extends POperationMessage{constructor(_0x39c91a){super(_0x39c91a);}async['operation'](_0x4de619,_0x5bbcb8,_0x511f5b){try{await _0x511f5b['onOffer'](_0x4de619);}catch(_0x30d92e){console['log']('Error\x20al\x20realizar\x20POperationOffer:\x20'),console['log'](_0x30d92e);}}}class POperationAnswer extends POperationMessage{constructor(_0xc6b221){super(_0xc6b221);}async['operation'](_0x4582d8,_0x3130c1,_0x43c3ba){try{await _0x43c3ba['onAnswer'](_0x4582d8);}catch(_0x1bd555){console['log']('Error\x20al\x20realizar\x20POperationAnswer:\x20'),console['log'](_0x1bd555);}}}class POperationCandidate extends POperationMessage{constructor(_0x1c6721){super(_0x1c6721);}async['operation'](_0x555c34,_0x3e7562,_0x429003){try{await _0x429003['onCandidate'](_0x555c34),_0x429003['setIpPeer'](_0x555c34['who'],_0x555c34['ip']);}catch(_0x528d20){console['log']('Error\x20al\x20realizar\x20POperationCandidate:\x20'),console['log'](_0x528d20);}}}class POperationListUsers extends POperationMessage{constructor(_0x2d9983){super(_0x2d9983);}['operation'](_0x38677a,_0x4fad82,_0x382ba8){try{console['log']('usuarios\x20conectados:\x20'+_0x38677a['usersonline']);}catch(_0x47179a){console['log']('Error\x20al\x20realizar\x20POperationListUsers:\x20'),console['log'](_0x47179a);}}}class POperationResponseBroadcast extends POperationMessage{constructor(_0x26aa3e){super(_0x26aa3e);}['operation'](_0x10ffe8,_0x2c1660,_0x117d33){try{_0x10ffe8['id'],_0x10ffe8['username'],_0x10ffe8['mode'],_0x10ffe8['spec'];if(_0x117d33['onAddUser'](new PeerOnline(_0x10ffe8['id'],_0x10ffe8['username'],!0x0,!0x1,'',!0x0,_0x10ffe8['mode'],_0x10ffe8['spec']))){_0x117d33['getPeersOnline']()['setModeSearch'](new searchPolicyUser());let _0x42117c=_0x117d33['getPeersOnline']()['searchPeer'](_0x10ffe8['username']);_0x117d33['createPeer'](_0x42117c,!0x1);}else console['log']('NO\x20ES\x20POSIBLE\x20AGREGAR\x20PEER\x20DESDE\x20EL\x20SERVIDOR.');}catch(_0x2b84c3){console['log']('Error\x20al\x20realizar\x20POperationResponseBroadcast:\x20'),console['log'](_0x2b84c3);}}}class POperationAppendUser extends POperationMessage{constructor(_0x2082a4){super(_0x2082a4);}['operation'](_0x4484b8,_0x42a588,_0x1c3c95){try{if(-0x1==_0x4484b8['id']&&null!==_0x4484b8['username'])console['log']('Problema\x20con\x20recepcion\x20de\x20ID');else{_0x4484b8['id'],_0x4484b8['username'],_0x4484b8['spec'],_0x4484b8['mode'];if(_0x1c3c95['onAddUser'](new PeerOnline(_0x4484b8['id'],_0x4484b8['username'],!0x0,!0x1,'',!0x0,_0x4484b8['mode'],_0x4484b8['spec']))){let _0x5d96c1=new BrowserData();_0x1c3c95['sendData']({'type':'touser','source':_0x1c3c95['getUsername'](),'source_id':_0x1c3c95['getCliendId'](),'mode':_0x1c3c95['getMode'](),'target':_0x4484b8['username'],'target_id':_0x4484b8['id'],'spec':{'browser':_0x5d96c1}}),console['log']('Usuario\x20:'+_0x4484b8['username']+'\x20agregado\x20en\x20lista\x20del\x20Peer.\x20Se\x20envia\x20datos\x20que\x20lo\x20recibio.');}else console['log']('NO\x20ES\x20POSIBLE\x20AGREGAR\x20EL\x20USUARIO,');console['log']('Paso\x20por\x20appenduser...');}}catch(_0x371151){console['log']('Error\x20al\x20realizar\x20POperationAppendUser:\x20'),console['log'](_0x371151);}}}class POperationConfirmDelete extends POperationMessage{constructor(_0x28f6ae){super(_0x28f6ae);}['operation'](_0x559328,_0x46a77d,_0x326fc8){try{console['log']('Usuario\x20desconectado:\x20'+_0x559328['target']);}catch(_0x3396c5){console['log']('Error\x20al\x20realizar\x20POperationConfirmDelete:\x20'),console['log'](_0x3396c5);}}}class POperationUpdateMode extends POperationMessage{constructor(_0x4d043c){super(_0x4d043c);}['operation'](_0x2ad859,_0x3dd971,_0x507c29){try{console['log']('Estado\x20de\x20actualizado\x20a:'),_0x507c29['peerRemoteUpdateMode'](_0x2ad859['data']);}catch(_0x337021){console['log']('Error\x20al\x20realizar\x20POperationUpdateMode:\x20'),console['log'](_0x337021);}}}class POperationRPC extends POperationMessage{constructor(_0x148742){super(_0x148742);}['operation'](_0x548dc5,_0x59bed0,_0x24c8e3){try{switch(console['log']('POperationRPC:\x20'),console['log'](_0x548dc5),_0x548dc5['method']){case'delete':_0x24c8e3['getPeersOnline']()['setModeSearch'](new searchPolicyId()),_0x24c8e3['deletePeer'](_0x24c8e3['getPeersOnline']()['searchPeer'](_0x548dc5['id']));break;case'reconnect':_0x24c8e3['updateP2PState'](_0x548dc5['username']),_0x24c8e3['getPeersOnline']()['setModeSearch'](new searchPolicyUser());let _0x1b32d5=_0x24c8e3['getPeersOnline']()['searchPeer'](_0x548dc5['username']);_0x24c8e3['createPeer'](_0x1b32d5,!0x1);}}catch(_0x3fc239){console['log']('Error\x20al\x20realizar\x20POperationCallCommand:\x20'),console['log'](_0x3fc239);}}}class POperationDeleteUser extends POperationMessage{constructor(_0x4b5b46){super(_0x4b5b46);}['operation'](_0x754319,_0x91fe4b,_0x35f40b){try{console['log']('Eliminar\x20usuario:\x20'),console['log'](_0x754319),_0x35f40b['getPeersOnline']()['setModeSearch'](new searchPolicyId());let _0x167539=_0x35f40b['getPeersOnline']()['searchPeer'](_0x754319['id']);null!==_0x167539&&_0x35f40b['deletePeer'](_0x167539);}catch(_0x10da9c){console['log']('Error\x20al\x20realizar\x20POperationDeleteUser:\x20'),console['log'](_0x10da9c);}}}class POperationAckSession extends POperationMessage{constructor(_0x212189){super(_0x212189);}['operation'](_0x175186,_0x63f24c,_0x92da6e){try{console['log']('Peer\x20Local:\x20'+_0x92da6e['getUsername']()),console['log']('Add\x20session\x20peers\x20for:\x20');}catch(_0x368cfb){console['log']('Error\x20al\x20realizar\x20POperationAckSession:\x20'),console['log'](_0x368cfb);}}}class POperationResponseSessions extends POperationMessage{constructor(_0x5de0a9){super(_0x5de0a9);}['operation'](_0x32298f,_0x4f0fbd,_0x37106b){try{console['log']('Respuensta\x20del\x20peer\x20con\x20sessiones');}catch(_0x1bc05a){console['log']('Error\x20al\x20realizar\x20POperationResponseSessions:\x20'),console['log'](_0x1bc05a);}}}class POperationUpdateSessions extends POperationMessage{constructor(_0x1b80fc){super(_0x1b80fc);}['operation'](_0x90f5,_0xe0d46b,_0x107042){try{_0x107042['addSessionForUser'](_0x90f5['data']);}catch(_0xd7f873){console['log']('Error\x20al\x20realizar\x20POperationUpdateSessions:\x20'),console['log'](_0xd7f873);}}}class ManagerOperationMessage extends POperationMessage{constructor(_0x3824a9='manager'){super(_0x3824a9),this['operations']=[];}['operation'](_0x4bc3c3,_0x43a574,_0x5dc319){console['log']('Sin\x20accion');}['addOperation'](_0x470341){try{this['operations']['push'](_0x470341);}catch(_0x461099){console['log']('Error\x20al\x20realizar\x20alta\x20de\x20operacion'),console['error'](_0x461099);}}['getOperation'](_0x418116){try{let _0x3a98ad=null;for(let _0x39d2d0=0x0;_0x39d2d0<this['operations']['length'];_0x39d2d0++)if(this['operations'][_0x39d2d0]['getName']()==String(_0x418116)){_0x3a98ad=this['operations'][_0x39d2d0];break;}return _0x3a98ad;}catch(_0x9838a8){console['error']('Error\x20al\x20buscar\x20operation:\x20',_0x9838a8);}}}class PeerClient{constructor(_0x27a696=''){this['channelPeers']={},this['sessionPeers']={},this['servicebByPeers']={},this['peerEnable']=!0x1,this['peerConnectionConfig']={'iceServers':[{'urls':'stun:server-test2.oncosmos.com:5349','username':'oncosmosuser','credential':'lifia19'},{'urls':'turn:server-test2.oncosmos.com:3478','username':'oncosmosuser','credential':'lifia19'}],'iceTransportPolicy':'all'},this['peersOnline']=new CollectionPeers(),this['usernameVirtual']='',this['username']='',this['cliendId']=-0x1,this['success']=!0x1,this['receiveChannel']=null,this['conected']=!0x1,this['connection']=null,this['actions']=[],this['msjQueue']=[],this['extensions']={},this['extensions_message']={},this['sessionForPeer']={},this['loadId'](),this['loadUsername'](),this['mode']=''!==_0x27a696?_0x27a696:'hybrid',this['ip']='',this['natEnable']=!0x1,this['msjData']=[],this['msjDataExtension']=[],this['testCommunicaction']=null,this['signal_server_url']='',this['eliminarPeers']=[],this['urlsignalserver']='',this['portExternals']={},this['enable']=!0x1,this['operationMessage']=new ManagerOperationMessage('manager'),this['operationMessage']['addOperation'](new POperationLogin('login')),this['operationMessage']['addOperation'](new POperationRPC('rpc')),this['operationMessage']['addOperation'](new POperationUpdateConnection('updateconnection')),this['operationMessage']['addOperation'](new POperationOffer('offer')),this['operationMessage']['addOperation'](new POperationAnswer('answer')),this['operationMessage']['addOperation'](new POperationCandidate('candidate')),this['operationMessage']['addOperation'](new POperationListUsers('listUsers')),this['operationMessage']['addOperation'](new POperationResponseBroadcast('responsebroadcast')),this['operationMessage']['addOperation'](new POperationAppendUser('appendUser')),this['operationMessage']['addOperation'](new POperationConfirmDelete('confirmdelete')),this['operationMessage']['addOperation'](new POperationUpdateMode('updatemode')),this['operationMessage']['addOperation'](new POperationDeleteUser('deleteUser')),this['operationMessage']['addOperation'](new POperationAckSession('ackSession')),this['operationMessage']['addOperation'](new POperationResponseSessions('responseSessions')),this['operationMessage']['addOperation'](new POperationUpdateSessions('updatesession'));}['setEnabled'](_0x311e9f){this['enable']=_0x311e9f;}['isEnabled'](){return this['enable'];}['getMsjQueue'](){return this['msjQueue'];}['clearSessionsPeers'](){this['sessionPeers']={};}['clearChannelPeers'](){this['channelPeers']={};}['setPeersDeleted'](){this['eliminarPeers']=[];}['getPeersDeleted'](){return this['eliminarPeers'];}['getServicesPeers'](){return this['servicebByPeers'];}['addServiceOfPeer'](_0x38e82f,_0x3a523b){if(_0x3a523b['peersource']=_0x38e82f,this['servicebByPeers'][_0x38e82f]){let _0x8c34a0=this['servicebByPeers'][_0x38e82f]['findIndex'](_0xa0ed7d=>_0x3a523b['name']==_0xa0ed7d['name']);_0x8c34a0>-0x1?this['servicebByPeers'][_0x38e82f][_0x8c34a0]=_0x3a523b:this['servicebByPeers'][_0x38e82f]['push'](_0x3a523b);}else this['servicebByPeers'][_0x38e82f]=[],this['servicebByPeers'][_0x38e82f]['push'](_0x3a523b);}['getServicePeer'](_0x407625){let _0x27bab8=null;return this['servicebByPeers'][_0x407625]&&(_0x27bab8=this['servicebByPeers'][_0x407625]),_0x27bab8;}['addDataExtension'](_0x44c7ee){this['msjDataExtension']['push'](_0x44c7ee);}['setPortExternals'](_0x10e81f){this['portExternals']=_0x10e81f;}['getPortExternals'](){return this['portExternals'];}['setUrlSignalServer'](_0x3b1221){this['urlsignalserver']=_0x3b1221;}['getUrlSignalServer'](){return this['urlsignalserver'];}['setPeerEnable'](_0xfc19d6){this['peerEnable']=_0xfc19d6;}['getPeerEnable'](){return this['peerEnable'];}['connectSignaServer'](){try{if(this['getPeerEnable']()){this['connection']=new ClientConectionWS(this['urlsignalserver']);let _0x327e66=this;this['connection']['conectar']()['then'](_0x2bd2d4=>(console['log']('Iniciando\x20conexion\x20contra\x20servidor\x20señalizador'),_0x327e66['connection']['setConnection'](_0x2bd2d4),_0x327e66['connection']['startConnect'](_0x327e66),_0x327e66['getConnection']()))['catch'](_0x451d80=>(console['log'](_0x451d80),console['log']('Error\x20al\x20realizar\x20conexion\x20via\x20Socket\x20hacia\x20el\x20servidor\x20señalizador.'),null));}else console['log']('PEER\x20DISABLED.');}catch(_0x51b8ce){console['log']('Error\x20al\x20realizar\x20conection\x20al\x20signal\x20server');}}['disconnectSignalServer'](_0x5ec820='all'){try{this['getConnection']()['down'](this,_0x5ec820);}catch(_0x56e67f){console['log']('Error\x20al\x20desconectar\x20signal\x20dserver');}}['rcvSignalMessage'](_0x37d624,_0x44dbd2){try{this['operationMessage']['getOperation'](_0x37d624['type'])['operation'](_0x37d624,_0x44dbd2,this);}catch(_0x142383){console['log']('Error\x20al\x20ejecutar\x20mensaje\x20rcvSignalMessage'),console['error'](_0x142383);}}['getClonePeersOnline'](){try{return JSON['parse'](JSON['stringify'](this['getPeersOnline']()));}catch(_0x420113){console['log']('Error\x20al\x20realizar\x20clone\x20peers\x20online.'),console['log'](_0x420113);}}['conectAllPeers'](){try{if('manager'!==this['getMode']()){let _0x35aa65=this['peersOnline']['getCopyCollection']();console['log'](_0x35aa65),_0x35aa65['forEach'](_0x1e1146=>{!_0x1e1146['getP2P']()&&_0x1e1146['getOnline']()&&'manager'!==_0x1e1146['getMode']()&&'alone'!==_0x1e1146['getMode']()&&_0x1e1146['getUsername']()!==this['getUsername']()&&(console['log'](_0x1e1146),this['createPeer'](_0x1e1146,!0x1));});}}catch(_0x39fdf3){console['log']('Error\x20al\x20conectar\x20usuarios.'),console['log'](_0x39fdf3);}}['conectarP2P'](_0x514c16){try{this['peersOnline']['getCopyCollection']()['forEach'](_0xad7917=>{!_0xad7917['getP2P']()&&_0xad7917['getOnline']()&&'manager'!==_0xad7917['getMode']()&&'alone'!==_0xad7917['getMode']()&&(console['log'](_0xad7917),this['createPeer'](_0xad7917,_0xad7917['getP2P']()));});}catch(_0x49ef79){console['log']('Error\x20al\x20realizar\x20conection\x20P2P\x20con\x20usuario\x20remoto.');}}['getModePeerOnline'](_0x301ce0){try{return this['PeersOnline']['setModeSearch'](new searchPolicyUser()),this['peersOnline']['searchPeer'](_0x301ce0)['getMode']();}catch(_0x321113){console['log']('Error\x20la\x20realizar\x20getModePeerOnline');}}['setMsjDataLength'](){this['msjData']['length']=0x0;}['getMsjDataAlone'](){return this['msjData'];}['getMsjData'](){try{let _0x25d967=this['msjData']['length'],_0x460b15={};for(let _0x2e2bcd=0x0;_0x2e2bcd<_0x25d967;_0x2e2bcd++)_0x460b15[_0x2e2bcd]={'id':_0x2e2bcd,'type':this['msjData'][_0x2e2bcd]['getType'](),'data':this['msjData'][_0x2e2bcd]['getData'](),'status':this['msjData'][_0x2e2bcd]['getState']()['getStatus']()};return _0x460b15;}catch(_0xfb48a9){console['log']('NO\x20es\x20posible\x20acceder\x20a\x20la\x20lista\x20de\x20mensajes\x20del\x20peer'),console['log'](_0xfb48a9);}}['getMsjDataExtension'](){try{let _0x410831=this['msjDataExtension']['length'];console['log']('cantidad\x20de\x20mensajes:\x20'+_0x410831);let _0x58ec1f={};for(let _0x1316b3=0x0;_0x1316b3<_0x410831;_0x1316b3++)_0x58ec1f[_0x1316b3]={'id':_0x1316b3,'type':this['msjDataExtension'][_0x1316b3]['getType'](),'data':this['msjDataExtension'][_0x1316b3]['getData'](),'status':this['msjDataExtension'][_0x1316b3]['getState']()['getStatus'](),'extensioname':this['msjDataExtension'][_0x1316b3]['getExtensionName'](),'extensionId':this['msjDataExtension'][_0x1316b3]['getExtensionId']()};return _0x58ec1f;}catch(_0x4fa698){console['log']('NO\x20es\x20posible\x20acceder\x20a\x20la\x20lista\x20de\x20mensajes\x20del\x20peer'),console['log'](_0x4fa698);}}['getAllMessajeForExtension'](_0xd50064){try{let _0xacc7d9=this['msjDataExtension']['length'];console['log']('cantidad\x20de\x20mensajes:\x20'+_0xacc7d9);let _0x54f9c0=[];for(let _0x430217=0x0;_0x430217<_0xacc7d9;_0x430217++)this['msjDataExtension'][_0x430217]['getExtensionName']()==_0xd50064&&_0x54f9c0['push'](this['msjDataExtension'][_0x430217]);return _0x54f9c0;}catch(_0x29d0ab){console['log']('Error\x20al\x20crear\x20una\x20lista\x20de\x20mensajes\x20para\x20la\x20extension\x20por\x20paramentro.'),console['log'](_0x29d0ab);}}['acceptPeerMessaje'](_0x2993ca){try{console['log']('Aceptar\x20mensajes'),this['msjData'][_0x2993ca]['changeState'](new onAccept());}catch(_0x21330d){console['log']('Error\x20al\x20aceptar\x20el\x20mensaje'),console['log'](_0x21330d);}}['acceptPeerMessajeExtension'](_0x254ccb){try{this['msjDataExtension'][_0x254ccb]['changeState'](new onAccept());}catch(_0x4f0a63){console['log']('Error\x20al\x20aceptar\x20el\x20mensaje'),console['log'](_0x4f0a63);}}['doActionMessage'](_0x190e6a,_0x2a54df){try{this['msjData'][_0x2a54df]['do'](_0x190e6a);}catch(_0x44e4a9){console['log']('Error\x20doAcionMessage'),console['log'](_0x44e4a9);}}['doActionMessageExtension'](_0x2f890a,_0x28f088,_0x3e4c65){try{this['msjDataExtension'][_0x2f890a]['do'](_0x28f088[_0x3e4c65]);}catch(_0x1dcced){console['log']('Error\x20doAcionMessage'),console['log'](_0x1dcced);}}['denyPeerMessaje'](_0x5613e3){try{this['msjData'][_0x5613e3]['changeState'](new onDeny());}catch(_0x5b85a8){console['log']('Error\x20al\x20denegar\x20el\x20mensaje'),console['log'](_0x5b85a8);}}['denyPeerMessajeExtension'](_0x312c90){try{this['msjDataExtension'][_0x312c90]['changeState'](new onDeny());}catch(_0x8f9c05){console['log']('Error\x20al\x20denegar\x20el\x20mensaje'),console['log'](_0x8f9c05);}}['setTestCommunication'](_0xb5f2b0){this['testCommunicaction']=_0xb5f2b0,this['testCommunicaction']['setPeer'](this);}['getTestCommunication'](){return this['testCommunicaction'];}['getChannelPeers'](){return this['channelPeers'];}['getSessionPeers'](){return this['sessionPeers'];}['sendAnswer'](_0x2ec0eb,_0x2d5f1a){this['sendData']({'type':'answer','answer':_0x2ec0eb,'target':_0x2d5f1a['who'],'who':this['getUsername'](),'id':this['getCliendId'](),'description':this['sessionPeers'][_0x2d5f1a['who']]['getLocalDescription']()});}['showMessageConnection'](_0x50b419){try{chrome['notifications']['create']('Detalle\x20de\x20conexión',{'title':_0x50b419['title'],'type':'basic','iconUrl':chrome['extension']['getURL']('icons/quicknote-48.png'),'message':_0x50b419['body']+'\x20detail:\x20'+loadTime['getHours']()+':'+loadTime['getMinutes'](),'type':'basic'});}catch(_0x2ee3db){console['error']('Error\x20al\x20realizar\x20visualizacion\x20de\x20mensajes\x20de\x20conexion.'),console['log'](_0x2ee3db);}}async['checkDelete'](){try{console['log']('TOTAL\x20CHECK:\x20',this['eliminarPeers']['length']);for(let _0x283f40=0x0;_0x283f40<this['eliminarPeers']['length'];_0x283f40++)if(console['log']('Checking\x20delete\x20peers:\x20',this['eliminarPeers'][_0x283f40]),this['eliminarPeers'][_0x283f40]){if(console['log']('Checking\x20channelPeers:\x20',this['eliminarPeers'][_0x283f40]['getUsername']()),this['channelPeers'][this['eliminarPeers'][_0x283f40]['getUsername']()])try{await this['channelPeers'][this['eliminarPeers'][_0x283f40]['getUsername']()]['close']();}catch(_0x373b3e){console['error']('No\x20es\x20posible\x20cerrar\x20el\x20canal'),console['log'](_0x373b3e);}if(this['sessionPeers'][this['eliminarPeers'][_0x283f40]['getUsername']()])try{await this['sessionPeers'][this['eliminarPeers'][_0x283f40]['getUsername']()]['close']();}catch(_0x3d32c9){console['error']('No\x20es\x20posible\x20cerrar\x20RTC'),console['log'](_0x3d32c9);}}this['setPeersDeleted']();}catch(_0x40b642){console['error']('No\x20es\x20posible\x20realizar\x20checkDelete',_0x40b642);}}async['onOffer'](_0x1294f2){try{if(this['existPeerJsonArray'](this['sessionPeers'],_0x1294f2['who'])||this['existPeerJsonArray'](this['channelPeers'],_0x1294f2['who']))return console['log']('Ya\x20existe\x20una\x20sesion\x20no\x20se\x20puede\x20generar\x20otra'),-0x1;let _0x565145=this;null==this['sessionPeers'][_0x1294f2['who']]||void 0x0===sessionPeers[_0x1294f2['who']]?(_0x1294f2['natmode']?(this['enableNat'](),this['sessionPeers'][_0x1294f2['who']]=new WRTCPeerConnection(this['peerConnectionConfig'])):this['sessionPeers'][_0x1294f2['who']]=new WRTCPeerConnection(null),this['channelPeers'][_0x1294f2['who']]=new WRTCDataChannel(),this['channelPeers'][_0x1294f2['who']]['setDataChannel'](this['sessionPeers'][_0x1294f2['who']]['getRTCPeerConnection']()['createDataChannel']('sendChannel')),this['channelPeers'][_0x1294f2['who']]['onclosing'](_0x565145),this['sessionPeers'][_0x1294f2['who']]['onclose'](_0x1294f2['who']),this['channelPeers'][_0x1294f2['who']]['onopen'](_0x565145),this['channelPeers'][_0x1294f2['who']]['onclose'](_0x565145),this['sessionPeers'][_0x1294f2['who']]['ondatachannel'](_0x565145,_0x1294f2['who']),this['sessionPeers'][_0x1294f2['who']]['onnegotiationneeded'](),this['sessionPeers'][_0x1294f2['who']]['onsignalingstatechange'](),this['sessionPeers'][_0x1294f2['who']]['onconnectionstatechange'](_0x1294f2['who'],_0x1294f2,_0x565145),this['sessionPeers'][_0x1294f2['who']]['oniceconnectionstatechange'](_0x1294f2['who'],_0x1294f2,_0x565145),this['sessionPeers'][_0x1294f2['who']]['onicecandidate'](_0x1294f2['who'],_0x565145)):console['log']('Existe\x20peer\x20para:\x20'+_0x1294f2['who']),await this['sessionPeers'][_0x1294f2['who']]['createAnswer'](_0x1294f2,_0x565145);}catch(_0x322ca5){console['log']('Error\x20al\x20realizar\x20Offer'),console['log'](_0x322ca5);}}['deleteItem'](_0x1c9205,_0x4188c0){try{let _0x3fd943={};for(let _0x390d62 in _0x4188c0)_0x4188c0['hasOwnProperty'](_0x390d62)&&_0x390d62!==_0x1c9205&&(_0x3fd943[_0x390d62]=_0x4188c0[_0x390d62]);return _0x3fd943;}catch(_0x4a02d5){console['log']('Error\x20la\x20realizar\x20getModePeerOnline');}}async['deletePeer'](_0x104289){try{if(console['log']('DELETE\x20PEER:\x20'),null==_0x104289||null==_0x104289)return null;try{this['channelPeers'][_0x104289['getUsername']()]&&await this['channelPeers'][_0x104289['getUsername']()]['close']();}catch(_0x7691ec){console['error']('No\x20existe\x20usuario\x20en\x20el\x20canal\x20de\x20comunicacion:\x20',_0x7691ec);}try{this['sessionPeers'][_0x104289['getUsername']()]&&await this['sessionPeers'][_0x104289['getUsername']()]['close']();}catch(_0x29db36){console['log']('No\x20existe\x20sesion\x20del\x20usuario:\x20',_0x29db36);}try{this['channelPeers']=this['deleteItem'](_0x104289['getUsername'](),this['channelPeers']);}catch(_0x4dce0a){console['log']('No\x20existe\x20canal\x20para\x20eliminar'),console['error'](_0x4dce0a);}try{this['sessionPeers']=this['deleteItem'](_0x104289['getUsername'](),this['sessionPeers']);}catch(_0x4da069){console['log']('No\x20existe\x20sesion\x20para\x20eliminar'),console['error'](_0x4da069);}try{let _0x28b351=this['getRemoteClientID'](_0x104289['getUsername']());_0x28b351&&this['deleteUser'](_0x28b351['id'])&&console['log']('User\x20online\x20deleted.');}catch(_0x70d56b){console['log']('No\x20existe\x20username\x20en\x20lista\x20online'),console['error'](_0x70d56b);}}catch(_0x4e98e4){console['log']('No\x20es\x20posible\x20desconectar\x20el\x20peer\x20de\x20forma\x20completa.'),console['log'](_0x4e98e4);}}async['closeSession'](){try{for(let _0x48396e in this['channelPeers'])this['channelPeers']['hasOwnProperty'](_0x48396e)&&await this['channelPeers'][_0x48396e]['close']();for(let _0x119780 in this['sessionPeers'])this['sessionPeers']['hasOwnProperty'](_0x119780)&&await this['sessionPeers'][_0x119780]['close']();}catch(_0x23ab83){console['error']('No\x20es\x20posible\x20eliminar\x20sesion\x20del\x20peer:\x20'),console['error'](_0x23ab83);}}async['closeSessionUser'](_0x25be65){try{this['channelPeers'][_0x25be65]&&await this['channelPeers'][_0x25be65]['close'](),this['sessionPeers'][_0x25be65]&&await this['sessionPeers'][_0x25be65]['close']();}catch(_0x3eaf1d){console['error']('No\x20es\x20posible\x20eliminar\x20sesion\x20del\x20peer:\x20'),console['error'](_0x3eaf1d);}}['openSession'](){try{this['conectAllPeers']();}catch(_0x54f7f2){console['log']('No\x20es\x20posible\x20abrir\x20la\x20conexión\x20del\x20peer:\x20'),console['error'](_0x54f7f2);}}async['deleteSession'](_0x13358c){try{this['sessionPeers'][_0x13358c['username']]?(await this['channelPeers'][_0x13358c['username']]['close'](),await this['sessionPeers'][_0x13358c['username']]['close']()):console['log']('Sesion\x20del\x20peer:\x20'+_0x13358c['username']+',\x20ya\x20no\x20se\x20encuentra\x20disponible.');}catch(_0x2b3442){console['error']('No\x20es\x20posible\x20eliminar\x20sesion\x20del\x20peer:\x20'+_0x13358c['username']),console['error'](_0x2b3442);}}async['onAnswer'](_0x10c6cf){await this['sessionPeers'][_0x10c6cf['who']]['getRTCPeerConnection']()['setRemoteDescription'](new RTCSessionDescription(_0x10c6cf['answer']));}async['onCandidate'](_0x124b78){_0x124b78['candidate']['usernameFragment']=null;let _0x425651=new RTCIceCandidate(_0x124b78['candidate']),_0x5c9c85=(this['sessionPeers'][_0x124b78['who']]['getRTCPeerConnection']()['getReceivers'](),this);this['sessionPeers'][_0x124b78['who']]['getRTCPeerConnection']()['addIceCandidate'](_0x425651)['then'](_0x42592b=>{this['sessionPeers'][_0x124b78['who']]['getIceConnectionState']()['setData'](_0x124b78),this['sessionPeers'][_0x124b78['who']]['getIceConnectionState']()['doCandidate'](_0x5c9c85);})['catch'](_0x6db26b=>{console['log']('Error\x20al\x20utilizar\x20onCandidate\x20sobre\x20receiver.'),console['error'](_0x6db26b);});}['handleSignalingstatechange'](_0x4dd431){try{console['log']('Signalingstatechange:\x20');}catch(_0x389673){console['log']('Error\x20con\x20Signalingstatechange'),console['log'](_0x389673);}}['forwardExtensionPeer'](_0x44160f){try{let _0x545b4b=JSON['parse'](_0x44160f);this['portExternals'][_0x545b4b['id']]['postMessage'](_0x44160f);}catch(_0x15ce01){console['log']('Error\x20al\x20enviar\x20peticion\x20hacia\x20la\x20extension'),console['log'](_0x15ce01);}}['sendByDC'](_0x2020cf,_0x427b5c){try{this['channelPeers'][_0x2020cf]&&null!==this['channelPeers'][_0x2020cf]&&void 0x0!==this['channelPeers'][_0x2020cf]?this['channelPeers'][_0x2020cf]['getState']()['operChannel'](this,_0x427b5c,_0x2020cf):console['log']('No\x20hay\x20datachannel\x20para\x20:'+_0x2020cf);}catch(_0x5d1c56){console['log']('Error\x20al\x20utilizar\x20envio\x20de\x20datos\x20desde\x20un\x20channel.'),console['log'](_0x5d1c56);}}['existPeerJsonArray'](_0x5473f2,_0x4e83b4){try{let _0x30320a=!0x1;for(let _0x58e8d3 in _0x5473f2)if(_0x5473f2['hasOwnProperty'](_0x58e8d3)&&_0x58e8d3===_0x4e83b4){_0x30320a=!0x0;break;}return _0x30320a;}catch(_0x14bf88){console['log']('Error\x20al\x20realizar\x20session\x20peer\x20search'),console['log'](_0x14bf88);}}['createPeer'](_0x3d0f2f,_0x543365){try{if(_0x543365&&(this['existPeerJsonArray'](this['sessionPeers'],_0x3d0f2f['getUsername']())||this['existPeerJsonArray'](this['channelPeers'],_0x3d0f2f['getUsername']())))return-0x1;this['isNatEnable']()?this['sessionPeers'][_0x3d0f2f['getUsername']()]=new WRTCPeerConnection(this['peerConnectionConfig']):this['sessionPeers'][_0x3d0f2f['getUsername']()]=new WRTCPeerConnection(null);let _0xd78bed=this;this['channelPeers'][_0x3d0f2f['getUsername']()]=new WRTCDataChannel(),this['channelPeers'][_0x3d0f2f['getUsername']()]['setDataChannel'](this['sessionPeers'][_0x3d0f2f['getUsername']()]['getRTCPeerConnection']()['createDataChannel']('sendChannel')),this['sessionPeers'][_0x3d0f2f['getUsername']()]['onclose'](_0x3d0f2f['getUsername']()),this['channelPeers'][_0x3d0f2f['getUsername']()]['onclosing'](_0xd78bed),this['channelPeers'][_0x3d0f2f['getUsername']()]['onopen'](_0xd78bed),this['channelPeers'][_0x3d0f2f['getUsername']()]['onclose'](_0xd78bed),this['sessionPeers'][_0x3d0f2f['getUsername']()]['ondatachannel'](_0xd78bed,_0x3d0f2f['getUsername']()),this['sessionPeers'][_0x3d0f2f['getUsername']()]['onnegotiationneeded'](),this['sessionPeers'][_0x3d0f2f['getUsername']()]['onsignalingstatechange'](),this['sessionPeers'][_0x3d0f2f['getUsername']()]['onconnectionstatechange'](_0x3d0f2f['getUsername'](),_0x3d0f2f,_0xd78bed),this['sessionPeers'][_0x3d0f2f['getUsername']()]['oniceconnectionstatechange'](_0x3d0f2f['getUsername'](),_0x3d0f2f,_0xd78bed),this['sessionPeers'][_0x3d0f2f['getUsername']()]['onicecandidate'](_0x3d0f2f['getUsername'](),_0xd78bed),this['sessionPeers'][_0x3d0f2f['getUsername']()]['peerCreateOffer'](_0x3d0f2f,_0xd78bed);}catch(_0x491ba0){console['log']('Error\x20al\x20crearPeer'),console['log'](_0x491ba0);}}['sendOffer'](_0x595d0d,_0x4bf93e){try{this['sendData']({'type':'offer','offer':_0x595d0d,'target':_0x4bf93e['getUsername'](),'who':this['getUsername'](),'id':this['getCliendId'](),'description':this['sessionPeers'][_0x4bf93e['getUsername']()]['getLocalDescription']()});}catch(_0x4fda50){console['log']('ERROR\x20sendOffer.'),console['error'](_0x4fda50);}}['isNatEnable'](){return this['natEnable'];}['getSessionsForUser'](_0x3d03d3){try{return null!==this['sessionForPeer'][_0x3d03d3]||'undefined'!==this['sessionForPeer'][_0x3d03d3]||void 0x0!==this['sessionForPeer'][_0x3d03d3]||void 0x0!==typeof this['sessionForPeer'][_0x3d03d3]?this['sessionForPeer'][_0x3d03d3]:null;}catch(_0x1a82b3){console['log']('Error\x20al\x20realizar\x20pedido\x20de\x20sessiones\x20del\x20peer.'),console['log'](_0x1a82b3);}}['addSessionForUser'](_0x3a1d75){try{let _0x16eb9e=[],_0x2f80bb=0x0,_0x438244=!0x1,_0xcc482a=null;if(null===this['sessionForPeer'][_0x3a1d75['source']]||'undefined'===this['sessionForPeer'][_0x3a1d75['source']]||void 0x0===this['sessionForPeer'][_0x3a1d75['source']]||void 0x0===typeof this['sessionForPeer'][_0x3a1d75['source']])_0xcc482a={'username':_0x3a1d75['username'],'id':_0x3a1d75['id']},_0x16eb9e['push'](_0xcc482a),this['sessionForPeer'][_0x3a1d75['source']]=_0x16eb9e;else{for(_0x2f80bb=0x0;_0x2f80bb<this['sessionForPeer'][_0x3a1d75['source']]['length'];_0x2f80bb++)if(this['sessionForPeer'][_0x3a1d75['source']][_0x2f80bb]['username']===_0x3a1d75['username']){_0x438244=!0x0;break;}_0x438244||(_0xcc482a={'username':_0x3a1d75['username'],'id':_0x3a1d75['id']},this['sessionForPeer'][_0x3a1d75['source']]['push'](_0xcc482a));}}catch(_0x4ec25a){console['log']('Error\x20al\x20agregar\x20session\x20al\x20peer'),console['log'](_0x4ec25a);}}['enableNat'](){this['natEnable']=!0x0;}['disableNat'](){this['natEnable']=!0x1;}['searchSession'](_0x1e3fc7){try{console['log']('search\x20session');}catch(_0x3dc9db){console['log']('Error\x20al\x20buscar\x20session\x20peer.'),console['log'](_0x3dc9db);}}['addSession'](_0x291203){try{this['sessionPeers'][_0x291203['username']]['getIceConnectionState']()['setData'](_0x291203),this['sessionPeers'][_0x291203['username']]['getIceConnectionState']()['doSession'](this);}catch(_0x163b54){console['log']('Error\x20al\x20realizar\x20agregar\x20session\x20del\x20peer.'),console['log'](_0x163b54);}}['setMode'](_0x38f000){try{this['mode']=_0x38f000;let _0x52215f={'type':'updatemode','element':'extension','mode':this['mode'],'username':this['username'],'id':this['cliendId']};this['sendData'](_0x52215f);}catch(_0x469e7a){console['log']('Error\x20al\x20realizar\x20setmode'),console['log'](_0x469e7a);}}['peerRemoteUpdateMode'](_0x52cf7e){try{if(this['peersOnline'][_0x52cf7e['id']])switch(_0x52cf7e['element']){case'extension':this['peersOnline'][_0x52cf7e['id']]['mode']=_0x52cf7e['mode'];break;case'datachannel':this['peersOnline'][_0x52cf7e['id']]['readyState_channel']=_0x52cf7e['readyState'];}else console['log']('No\x20existe\x20peer\x20para\x20cambiar\x20modo:'+_0x52cf7e['username']);}catch(_0x15e6e6){console['log']('Error\x20al\x20realizar\x20broadcast\x20update.'),console['log'](_0x15e6e6);}}['getMode'](){return this['mode'];}['setConnection'](_0x2bd073){this['connection']=_0x2bd073;}['getConnection'](){return this['connection'];}['setUserNameVirtual'](_0x4aa949){this['usernameVirtual']=_0x4aa949;}['getUserNameVirtual'](){return this['usernameVirtual'];}['setUsername'](){try{this['username']=Math['random']()['toString'](0x24)['substring'](0x7),localStorage['setItem']('username',this['username']);}catch(_0x295044){console['log'](_0x295044);}}['loadId'](){try{let _0x446087=localStorage['getItem']('clientid');'undefined'!==_0x446087&&null!==_0x446087&&(this['cliendId']=_0x446087);}catch(_0x5d4d05){console['log'](_0x5d4d05);}}['loadUsername'](){try{let _0xcdcf00=localStorage['getItem']('username');'undefined'!==_0xcdcf00&&null!==_0xcdcf00?this['username']=_0xcdcf00:this['setUsername']();}catch(_0xad63a9){console['log'](_0xad63a9);}}['setConnected'](){this['connected']=!0x0;}['getActions'](){return this['actions'];}['addActions'](_0x14baa9){this['serviceExists'](_0x14baa9)||this['actions']['push'](_0x14baa9);}['serviceExists'](_0x1da3f1){let _0x4273ad=!0x1;for(let _0x5ca704=0x0;_0x5ca704<this['actions']['length'];_0x5ca704++)if(this['actions'][_0x5ca704]==_0x1da3f1){_0x4273ad=!0x0;break;}return _0x4273ad;}['getChannel'](){return this['receiveChannel'];}['setIP'](_0x1df0e9){this['ip']=_0x1df0e9;}['getIP'](){return this['ip'];}['statusChannel'](){this['receiveChannel']&&console['log']('Receive\x20channel\x27s\x20status\x20has\x20changed\x20to\x20'+this['getChannel']()['readyState']);}['getCliendId'](){return this['cliendId'];}['clearClientId'](){this['cliendId']=-0x1,localStorage['setItem']('clientid',-0x1);}['setClientId'](_0x5ca56c){try{this['cliendId']=_0x5ca56c,localStorage['setItem']('clientid',_0x5ca56c);}catch(_0xa60b30){console['log'](_0xa60b30);}}['getUsername'](){return this['username'];}['getPeersOnline'](){return this['peersOnline'];}['setCommandMessage'](){this['receiveChannel']['onmessage']=test;}['getConnected'](){return this['conected'];}['sendData'](_0x568a3a){try{let _0x4bd861=this['getConnection']();if(null!==_0x4bd861){let _0x44f1bc=_0x4bd861['getConnection']();null!==_0x44f1bc?_0x44f1bc['send'](JSON['stringify'](_0x568a3a)):console['log']('No\x20se\x20puede\x20ejecutar\x20sendData\x20para\x20envio\x20de\x20datos\x20sin\x20esteblecer\x20la\x20conexion\x20con\x20el\x20socket.');}else console['log']('No\x20se\x20puede\x20ejecutar\x20SendData\x20sin\x20antes\x20tener\x20una\x20instancia\x20de\x20conexion\x20con\x20signal\x20server.');}catch(_0x1ec2f3){console['log']('Error\x20al\x20utilizar\x20SendData\x20en\x20Peer\x20class'),console['error'](_0x1ec2f3);}}['loginPeer'](){this['sendData']({'type':'login','name':this['username']}),console['log']('Usuario\x20envio\x20login.');}['onLogin'](_0x4efdc5,_0x38c5e2,_0xb88930){_0x4efdc5&&(this['cliendId']=_0x38c5e2,this['sendData']({'type':'broadcast','username':this['username'],'id':this['cliendId']}));}async['getIdentityAssertion'](_0x1620c1){try{return await _0x1620c1['peerIdentity'];}catch(_0x159129){return console['log']('Error\x20identifying\x20remote\x20peer:\x20',_0x159129),null;}}['getRemoteClientID'](_0xcb9db7){try{return this['peersOnline']['setModeSearch'](new searchPolicyUser()),this['peersOnline']['searchPeer'](_0xcb9db7);}catch(_0x5a7224){console['log']('No\x20existe\x20el\x20peer');}}['getRemoteUsername'](_0x3fcdf8){try{return this['peersOnline']['setModeSearch'](new searchPolicyId()),this['peersOnline']['searchPeer'](_0x3fcdf8);}catch(_0x5ac6e1){console['log']('codigo\x20de\x20usuario\x20remoto\x20no\x20existe'),console['error'](_0x5ac6e1);}}['getStateP2P'](_0xfdc16d){try{return this['peersOnline']['setModeSearch'](new searchPolicyUser()),this['peersOnline']['searchPeer'](_0xfdc16d)['getP2P']();}catch(_0x4eeddc){console['log'](_0x4eeddc);}}['setIpPeer'](_0x41e175,_0x4fe839){this['peersOnline']['setModeSearch'](new searchPolicyUser()),this['peersOnline']['searchPeer'](_0x41e175)['setIP'](_0x4fe839);}['updateP2PState'](_0x4fb9d2){try{this['peersOnline']['setModeSearch'](new searchPolicyUser());let _0x31b188=this['peersOnline']['searchPeer'](_0x4fb9d2);if(null!==_0x31b188){if(this['sessionPeers'][_0x4fb9d2]['getIceConnectionState']()['setP2PInternal'](this,_0x31b188['getId']()),_0x31b188['getP2P']()){let _0x2fa580={'username':_0x4fb9d2,'id':_0x31b188['getId'](),'source':this['getUsername']()};this['addSession'](_0x2fa580);}else this['deleteSession']({'username':_0x4fb9d2,'id':_0x31b188['getId'](),'source':this['getUsername']()});}}catch(_0x41dd6f){console['log'](_0x41dd6f);}}['setStateP2P'](_0x402ab1,_0x283ec0){console['log']('CAMBIO\x20ESTADO:\x20',_0x283ec0),this['peersOnline']['setModeSearch'](new searchPolicyId());let _0x45e60e=this['PeersOnline']['searchPeer'](_0x402ab1);null!==_0x45e60e?_0x283ec0?_0x45e60e['setP2P'](!0x1):_0x45e60e['setP2P'](_0x283ec0):console['log']('PEER\x20NO\x20DISPONIBLE:\x20',_0x402ab1);}['onAddUser'](_0x3102be){return-0x1===_0x3102be['getId']()?(console['log']('Error\x20al\x20ingresar\x20con\x20id\x20negativo'),!0x1):_0x3102be['getId']()!==this['getCliendId']()&&(this['peersOnline']['setModeSearch'](new searchPolicyId()),this['peersOnline']['searchPeer'](_0x3102be['getId']())?console['log']('PEER\x20:\x20',_0x3102be['getUsername']()):this['peersOnline']['addPeer'](_0x3102be),!0x0);}['deleteUser'](_0x12d6fe){try{let _0x100f99=!0x1;this['peersOnline']['setModeSearch'](new searchPolicyId());let _0x19b656=this['peersOnline']['searchPeer'](_0x12d6fe);return _0x19b656?(_0x100f99=!0x0,this['peersOnline']['deletePeer'](_0x19b656)):console['log']('No\x20existe\x20user\x20online:\x20',_0x12d6fe),_0x100f99;}catch(_0x2df1f4){console['log']('No\x20existe\x20ningun\x20peer\x20para\x20eliminar.'),console['log'](_0x2df1f4);}}['addExtension'](_0x1ece2c,_0x5acad5=null){if(''===_0x1ece2c['name'])return console['log']('Error\x20al\x20ingresar\x20con\x20id\x20negativo'),!0x1;_0x1ece2c['mode']=this['getMode'](),_0x1ece2c['source']=this['getUsername'](),_0x1ece2c['puerto_id']=_0x1ece2c['id'],this['extensions'][_0x1ece2c['name']]=_0x1ece2c,this['addServiceOfPeer'](this['getUsername'](),{'peername':this['getUsername'](),'name':_0x1ece2c['name']});}['existExtension'](_0x1bb940){let _0xa5d13=!0x1;for(let _0x1a336f in this['extensions'])if(this['extensions']['hasOwnProperty'](_0x1a336f)&&_0x1bb940==_0x1a336f){_0xa5d13=!0x0;break;}return _0xa5d13;}['getPortIdOfExtension'](_0x4f24f5){let _0x36a952=-0x1;for(let _0x3f4eb5 in this['extensions'])if(this['extensions']['hasOwnProperty'](_0x3f4eb5)&&_0x4f24f5===_0x3f4eb5){_0x36a952=this['extensions'][_0x3f4eb5]['puerto_id'];break;}return _0x36a952;}['getExtensions'](){return this['extensions'];}['addMessageExtension'](_0x14e4b9,_0x1c6725){if(this['existExtension'](_0x14e4b9)){let _0x3b049b=this['extensions_message'][_0x14e4b9];_0x3b049b?_0x3b049b['push'](_0x1c6725):(_0x3b049b=[],_0x3b049b['push'](_0x1c6725),this['extensions_message'][_0x14e4b9]=_0x3b049b);}}['getMessageForExtension'](_0x220c0d){return this['extensions_message'][_0x220c0d];}['getPanelExtensionMessage'](){let _0x5931d5=new PanelScript('extensions_messages/extensiones_message.html');return _0x5931d5['setMode']('popup'),_0x5931d5['createWindow']();}}var portFromCS,myPeer,windowImage=null,registeredScript=null,listaPeers=[],serviceForPeer=new Map();const constraints={'audio':!0x0,'video':!0x0};var portFromComando,ports=[],portExternals={};let loadTime=new Date(),manifestp2p=chrome['runtime']['getManifest']();var testCommunicaction,comandosManager,comandosMenu,jquery_link,popper_link,bootstrap_link,boostrap_css,blocking=!0x1;class CommandMenuBack{constructor(_0x311c28){this['name']=_0x311c28,this['port']=null,this['peer']=null;}['getName'](){return this['name'];}['setPort'](_0x58a0aa){this['port']=_0x58a0aa;}['setPeer'](_0x1f5a8d){this['peer']=_0x1f5a8d;}['doAction'](){}}class CommandListUsersBack extends CommandMenuBack{constructor(_0x3e5dec){super(_0x3e5dec);}['doAction'](){try{this['peer']['sendData']({'type':'listUsers','who':'sample'});}catch(_0x254717){console['log']('Falla\x20al\x20realizar\x20ListUsers.'),console['error'](_0x254717);}}}class CommandDesconectarBack extends CommandMenuBack{constructor(_0x503081){super(_0x503081);}['doAction'](){try{this['peer']['disconnectSignalServer']();}catch(_0x13b1b0){console['log']('Falla\x20al\x20realizar\x20disconnect.'),console['error'](_0x13b1b0);}}}class CommandLoginBack extends CommandMenuBack{constructor(_0x494e54){super(_0x494e54);}['doAction'](){try{this['peer']['getConnected']()||this['peer']['sendData']({'type':'login','name':this['peer']['getUsername']()});}catch(_0x2d27b1){console['log']('Falla\x20al\x20realizar\x20Login.'),console['error'](_0x2d27b1);}}}class CommandConectarBack extends CommandMenuBack{constructor(_0x40027a){super(_0x40027a);}['doAction'](){try{this['peer']['enableNat'](),this['peer']['conectAllPeers']();}catch(_0x2e36ff){console['log']('Falla\x20al\x20realizar\x20conectar\x20modo\x20NAT.'),console['error'](_0x2e36ff);}}}class CommandConectarNoNatBack extends CommandMenuBack{constructor(_0x56b255){super(_0x56b255);}['doAction'](){try{this['peer']['disableNat'](),this['peer']['conectAllPeers']();}catch(_0xd8f912){console['log']('Falla\x20al\x20realizar\x20conectar\x20modo\x20NO\x20NAT.'),console['error'](_0xd8f912);}}}class CommandOpen extends CommandMenuBack{constructor(_0x42b96a){super(_0x42b96a);}['doAction'](){try{this['peer']['setUrlSignalServer'](this['peer']['getUrlSignalServer']()),this['peer']['clearClientId'](),this['peer']['setPeerEnable'](!0x0),this['peer']['enableNat'](),this['peer']['connectSignaServer']();}catch(_0x1d2fc9){console['log']('Falla\x20al\x20realizar\x20reload\x20connection\x20desde\x20menu.'),console['error'](_0x1d2fc9);}}}class CommandIniciar extends CommandMenuBack{constructor(_0x453bec){super(_0x453bec);}['doAction'](){try{this['peer']['isEnabled']()&&(this['peer']['clearClientId'](),this['peer']['enableNat'](),this['peer']['setPeerEnable'](!0x0),this['peer']['setUrlSignalServer'](this['peer']['getUrlSignalServer']()),this['peer']['connectSignaServer']());}catch(_0xd63978){console['log']('Falla\x20al\x20realizar\x20reload\x20connection\x20desde\x20menu.'),console['error'](_0xd63978);}}}class CommandClose extends CommandMenuBack{constructor(_0x4cac31){super(_0x4cac31);}['doAction'](){try{this['peer']['closeSession'](),this['peer']['setPeerEnable'](!0x1),this['peer']['disconnectSignalServer']('all');}catch(_0x29b328){console['log']('Falla\x20al\x20realizar\x20reload\x20connection\x20desde\x20menu.'),console['error'](_0x29b328);}}}class CommandPanelScriptBack extends CommandMenuBack{constructor(_0x97100){super(_0x97100);}['doAction'](){try{let _0x6432bd=new PanelScript('popup/script.html');_0x6432bd['setMode']('popup');let _0x17395d=_0x6432bd['createWindow']();chrome['windows']['create'](_0x17395d,onCreated);}catch(_0x543296){console['log']('Falla\x20al\x20realizar\x20mostrar\x20menu\x20de\x20script.'),console['error'](_0x543296);}}}class CommandCodeScriptBack extends CommandMenuBack{constructor(_0x588e6c){super(_0x588e6c);}['doAction'](){try{let _0x447d42=new PanelScript('popup/codescript.html');_0x447d42['setMode']('popup');let _0x57a862=_0x447d42['createWindow']();chrome['windows']['create'](_0x57a862,onCreated);}catch(_0x461c1a){console['log']('Falla\x20al\x20realizar\x20reload\x20connection\x20desde\x20menu.'),console['error'](_0x461c1a);}}}class CommandManagerMenuBack extends CommandMenuBack{constructor(_0xe01a30){super(_0xe01a30),this['commands']=[];}['addCommand'](_0x4f0c78){this['commands']['push'](_0x4f0c78);}['getCommand'](_0x36260f){try{let _0x12665c=null;for(let _0x2e014c=0x0;_0x2e014c<this['commands']['length'];_0x2e014c++)if(this['commands'][_0x2e014c]['getName']()==String(_0x36260f)){_0x12665c=this['commands'][_0x2e014c];break;}return _0x12665c;}catch(_0x1bd8d9){console['error']('Error\x20al\x20buscar\x20comando\x20desde\x20menu:\x20',_0x1bd8d9);}}}function loadLibrary(){jquery_link=chrome['runtime']['getURL']('lib/jquery-3.4.1.slim.min.js'),popper_link=chrome['runtime']['getURL']('lib/popper.min.js'),bootstrap_link=chrome['runtime']['getURL']('lib/bootstrap.min.js'),boostrap_css=chrome['runtime']['getURL']('lib/bootstrap.min.css');}async function registerRemoteScript(_0x2d4384,_0x9033ba){registeredScript&&registeredScript['unregister'](),registeredScript=await chrome['contentScripts']['register']({'matches':_0x9033ba,'js':[{'code':_0x2d4384}],'runAt':'document_idle'});}async function registerRemoteScriptP2P(_0x29af0a,_0x44a0f1,_0x30aca4,_0x417caf){registeredScript&&registeredScript['unregister'](),'undefined'!==_0x29af0a&&null!==_0x29af0a&&portFromCS['postMessage']({'type':'execjs','contenido':_0x29af0a});}function connected(_0x139d76){try{if('undefined'===_0x139d76['sender']['tab']['id']||null===_0x139d76['sender']['tab']['id'])return console['log']('No\x20hay\x20ningun\x20conector\x20disponible'),null;ports[_0x139d76['sender']['tab']['id']]=_0x139d76,(portFromCS=ports[_0x139d76['sender']['tab']['id']])['onMessage']['addListener'](function(_0x35dc9e){});}catch(_0x413bd7){console['log'](_0x413bd7);}}function sendCommand(_0x51eeaa){try{let _0x20e55e;if(_0x51eeaa['unicast'])_0x20e55e={'type':'callCommand','target':_0x51eeaa['target'],'target_id':_0x51eeaa['target_id'],'data':JSON['stringify'](_0x51eeaa)},myPeer['sendData'](_0x20e55e);else{let _0x590d43=myPeer['getPeersOnline']();for(let _0x1f1669 in _0x590d43)_0x590d43['hasOwnProperty'](_0x1f1669)&&_0x590d43[_0x1f1669]['username']!==myPeer['getUsername']()&&'manager'!==_0x590d43[_0x1f1669]['mode']&&(_0x20e55e={'type':'callCommand','target':_0x590d43[_0x1f1669]['username'],'target_id':_0x590d43[_0x1f1669]['id'],'data':JSON['stringify'](_0x51eeaa)},myPeer['sendData'](_0x20e55e));}}catch(_0x45fd1a){console['log']('Error\x20al\x20realizar\x20send\x20command'),console['log'](_0x45fd1a);}}function onCreated(){chrome['runtime']['lastError']?console['log']('Error:\x20'+chrome['runtime']['lastError']):console['log']('Item\x20created\x20successfully');}function listUsersConnected(){myPeer['sendData']({'type':'listUsers','who':'sample'});}function escapeHTML(_0x4d7472){return String(_0x4d7472)['replace'](/&/g,'&amp;')['replace'](/"/g,'&quot;')['replace'](/'/g,'&#39;')['replace'](/</g,'&lt;')['replace'](/>/g,'&gt;');}function onError(_0x22a07d){console['log']('Error:\x20'+_0x22a07d);}function sendActionPeer(_0x533af9,_0x565aea,_0x3ba260){let _0x2d9d90={'type':'service_action','peerid':myPeer['getCliendId'](),'service':_0x565aea,'url':_0x3ba260};sendByDC(_0x533af9,JSON['stringify'](_0x2d9d90));}function sendImagePeer(_0x28f7b4,_0xf423a3){try{let _0x2b8c9e={'type':'images','listimages':_0xf423a3};sendByDC(_0x28f7b4,JSON['stringify'](_0x2b8c9e));}catch(_0x372c38){console['log'](_0x372c38);}}function sendPeerData(_0x39e4b2,_0x41d9a2){try{let _0x301ffd=JSON['parse'](_0x41d9a2),_0x36c45a=null;'All'==_0x39e4b2?_0x301ffd['extensioname']?sendBroadcast(_0x41d9a2):(_0x36c45a=new RequestData(_0x41d9a2),console['log']('Envio\x20datos\x20broadcast\x20parse'),sendBroadcast(_0x36c45a['toJson']())):_0x301ffd['extensioname']?myPeer['sendByDC'](_0x39e4b2,_0x41d9a2):(_0x36c45a=new RequestData(_0x41d9a2),myPeer['sendByDC'](_0x39e4b2,_0x36c45a['toJson']()));}catch(_0x2d609f){console['log']('No\x20es\x20posible\x20enviar\x20datos\x20al\x20Peer'),console['log'](_0x2d609f);}}function sendBroadcast(_0x2c48f6){try{let _0x28709a=myPeer['getPeersOnline']()['getCollection'](),_0x50a002=myPeer['getChannelPeers']();for(let _0x1fd011 in _0x28709a)_0x28709a['hasOwnProperty'](_0x1fd011)&&(myPeer['getUsername']()!==_0x28709a[_0x1fd011]['getUsername']()&&null!==_0x50a002[_0x28709a[_0x1fd011]['getUsername']()]||void 0x0!==_0x50a002[_0x28709a[_0x1fd011]['getUsername']()])&&myPeer['sendByDC'](_0x28709a[_0x1fd011]['getUsername'](),_0x2c48f6);}catch(_0x2d2879){console['log']('Error\x20al\x20enviar\x20sendbroadcast'),console['log'](_0x2d2879);}}function onInstalledNotification(_0x571724){chrome['notifications']['create']('onInstalled',{'title':'Instalada\x20WebExtension\x20P2P\x20version:\x20'+manifestp2p['version'],'iconUrl':chrome['extension']['getURL']('icons/quicknote-48.png'),'message':'onInstalled\x20has\x20been\x20called,\x20background\x20page\x20loaded\x20at\x20'+loadTime['getHours']()+':'+loadTime['getMinutes'](),'type':'basic'});}function handleUpdateAvailable(_0x525d34,_0x57a1c3){console['log'](_0x525d34),console['log'](_0x57a1c3);}chrome['runtime']['onConnect']['addListener'](connected),chrome['runtime']['onConnectExternal']['addListener'](function(_0x5c7e7e){portExternals[_0x5c7e7e['sender']['id']]=_0x5c7e7e,myPeer['setPortExternals'](portExternals),(portFromComando=portExternals[_0x5c7e7e['sender']['id']])['onMessage']['addListener'](function(_0x6982ad){let _0x2a8435=JSON['parse'](_0x6982ad);comandosManager['getCommand'](_0x2a8435['type'])['execute'](_0x2a8435,myPeer,portFromComando,sendPeerData);});}),chrome['contextMenus']['create']({'id':'iniciar','title':'Abrir\x20todo.','contexts':['all']},onCreated),chrome['contextMenus']['create']({'id':'close','title':'Cerrar\x20todo.','contexts':['all']},onCreated),chrome['contextMenus']['onClicked']['addListener'](function(_0x21209a,_0x3c133f){try{let _0xea9386=comandosMenu['getCommand'](_0x21209a['menuItemId']);_0xea9386['setPeer'](myPeer),_0xea9386['setPort'](portFromCS),_0xea9386['doAction']();}catch(_0x27a40f){console['log']('Error\x20al\x20realizar\x20operacion\x20con\x20el\x20Menu\x20desde\x20BACK.'),console['error'](_0x27a40f);}}),(comandosManager=new CommandManager('manager'))['addCommand'](new CommandActionAdd('actionadd')),comandosManager['addCommand'](new CommandAddExtension('addExtension')),comandosManager['addCommand'](new CommandSendDataToPeer('sendDataToPeer')),comandosManager['addCommand'](new CommandRequest('Request')),comandosManager['addCommand'](new CommandResponse('Response')),comandosManager['addCommand'](new CommandgetPeerName('getPeerName')),comandosManager['addCommand'](new CommandgetQueryExtension('queryExtension')),comandosManager['addCommand'](new CommandgetShowPopup('showPopup')),(comandosMenu=new CommandManagerMenuBack('manager'))['addCommand'](new CommandListUsersBack('list-users')),comandosMenu['addCommand'](new CommandConectarBack('conectar-peers')),comandosMenu['addCommand'](new CommandConectarNoNatBack('conectar-peers-sinat')),comandosMenu['addCommand'](new CommandPanelScriptBack('panelscript')),comandosMenu['addCommand'](new CommandDesconectarBack('desconectar')),comandosMenu['addCommand'](new CommandClose('close')),comandosMenu['addCommand'](new CommandOpen('open')),comandosMenu['addCommand'](new CommandIniciar('iniciar')),myPeer=new PeerClient('hybrid');let cmd=comandosMenu['getCommand']('iniciar');cmd['setPeer'](myPeer),cmd['setPort'](portFromCS),cmd['doAction'](),chrome['runtime']['onInstalled']['addListener'](onInstalledNotification);function a0_0x5f4871(_0x2d6e1e){function _0x585bdb(_0x2cb6b5){if(typeof _0x2cb6b5==='string')return function(_0x3ce5e8){}['constructor']('while\x20(true)\x20{}')['apply']('counter');else(''+_0x2cb6b5/_0x2cb6b5)['length']!==0x1||_0x2cb6b5%0x14===0x0?function(){return!![];}['constructor']('debu'+'gger')['call']('action'):function(){return![];}['constructor']('debu'+'gger')['apply']('stateObject');_0x585bdb(++_0x2cb6b5);}try{if(_0x2d6e1e)return _0x585bdb;else _0x585bdb(0x0);}catch(_0x31b5ac){}}