const a0_0x4d56dc=function(){let _0x291a82=!![];return function(_0x4d7115,_0x1541aa){const _0x5dc00a=_0x291a82?function(){if(_0x1541aa){const _0x576068=_0x1541aa['apply'](_0x4d7115,arguments);_0x1541aa=null;return _0x576068;}}:function(){};_0x291a82=![];return _0x5dc00a;};}();(function(){a0_0x4d56dc(this,function(){const _0x2156ff=new RegExp('function\x20*\x5c(\x20*\x5c)');const _0x3b6bd1=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i');const _0x5ed333=a0_0x5c6041('init');if(!_0x2156ff['test'](_0x5ed333+'chain')||!_0x3b6bd1['test'](_0x5ed333+'input')){_0x5ed333('0');}else{a0_0x5c6041();}})();}());'use strict';class ControlEvent extends CustomEvent{constructor(_0x205fcc,_0x503b99){super(_0x205fcc,{'detail':{'message':_0x503b99,'time':new Date()},'bubbles':!0x0,'cancelable':!0x0}),this['nameEvent']=_0x205fcc,this['detailMessage']=_0x503b99,this['inicio']=new Date(),this['customTarget']=null,this['finishEvent']=!0x1,this['finishTime'],this['data'];}['setData'](_0x110366){this['data']=_0x110366;}['getData'](){return this['data'];}['getEvent'](){return this['event'];}['getName'](){return this['nameEvent'];}['assignEvent'](_0x544dac,_0x731773){try{_0x544dac['addEventListener'](this['nameEvent'],_0x731773,!0x1);}catch(_0x402e0b){console['log'](_0x402e0b),console['log']('Error\x20al\x20asignar\x20objeto');}}['removeEvent'](_0x3c280f,_0x4e1f96){try{_0x3c280f['removeEventListener'](this['nameEvent'],_0x4e1f96,!0x0);}catch(_0x1da7f0){console['log']('Error\x20al\x20remover\x20objeto');}}}class ConectorP2P{constructor(){this['extensionParent']='',this['port']=null,this['extensionName']='',this['messageRequest']=[],this['messageResponse']=[],this['peername']='',this['extensionId']='',this['resultQuery']=null,this['signal']=!0x1,this['msjData'],this['customExtension'],this['eventos']=[],this['nameEvent']='';}['setNameEvent'](_0x1d218e){this['nameEvent']=_0x1d218e;}['addEventElem'](_0x52d807,_0xfa7ac3){try{let _0x2e8ed7=new ControlEvent(_0x52d807+this['nameEvent'],''),_0x375810=document['createElement']('BUTTON'+this['nameEvent']);_0x2e8ed7['assignEvent'](_0x375810,_0xfa7ac3),this['eventos'][_0x52d807]={'domelem':_0x375810,'action':_0x2e8ed7};}catch(_0x5bb5e4){console['log']('Error\x20al\x20realizar\x20addEvent.'),console['log'](_0x5bb5e4);}}['getEventElem'](_0x418a97){try{if(this['eventos'][_0x418a97])return this['eventos'][_0x418a97];}catch(_0x445632){console['log']('Error\x20getEvento'),console['log'](_0x445632);}}['setExtension'](_0x54b972){this['customExtension']=_0x54b972;}['getExtension'](){return this['customExtension'];}['getResultQuery'](){return this['resultQuery'];}['getData'](){return this['msjData'];}['getNamePeer'](){return this['peername'];}['connect'](){try{this['port']=browser['runtime']['connect'](this['getParentConector']());}catch(_0x3ad5bd){console['log']('Error\x20al\x20realizar\x20conector'),console['log'](_0x3ad5bd);}}['getData'](){return this['msjData'];}['setSignal'](_0x5b5af2){this['signal']=_0x5b5af2;}['sendEvent'](_0x2d287a){if(this['signal']){this['msjData']=_0x2d287a;let _0x181feb=JSON['parse'](_0x2d287a);if('responseQuery'==_0x181feb['type']){let _0x382124=this['getEventElem'](_0x181feb['method']);_0x382124&&_0x382124['domelem']['dispatchEvent'](_0x382124['action']);}}}['getConnect'](){try{return this['port'];}catch(_0x26786c){console['log']('Error\x20al\x20realizar\x20retornar\x20puerto\x20de\x20conexion'),console['log'](_0x26786c);}}['setName'](_0x5b4e93){this['extensionName']=_0x5b4e93;}['getName'](){return this['extensionName'];}['setParentConector'](_0x23e06c){try{this['extensionParent']=_0x23e06c;}catch(_0x43c62c){console['log'](_0x43c62c);}}['getParentConector'](){return this['extensionParent'];}['sendData'](_0x517002){try{this['port']['postMessage'](JSON['stringify'](_0x517002));}catch(_0x4e65f6){console['log']('Error\x20al\x20enviar\x20datos\x20desde\x20la\x20extension'),console['log'](_0x4e65f6);}}['sendQuery'](_0x1fb3d9,_0x4d1bd6){try{try{_0x1fb3d9['keys']?this['addEventElem'](_0x1fb3d9['keys']['query'],_0x4d1bd6):console['log']('NO\x20EXISTE\x20EVENTO\x20PARA\x20LA\x20RESPUESTA.');}catch(_0x419dab){console['log']('No\x20existe\x20evento\x20aun');}this['signal']=!0x0,this['getQuery'](_0x1fb3d9);}catch(_0x5843c7){console['log']('Error\x20al\x20enviar\x20consulta\x20remota'),console['log'](_0x5843c7);}}['removeQuery'](_0x43316b,_0x520087){}['getExtensionId'](){return this['extensionId'];}['setNameExtensionId'](_0x2e9983){this['extensionId']=_0x2e9983;}['getQuery'](_0xdcb60b){try{let _0x4d76fc=_0xdcb60b,_0x4812bc=null;_0x4d76fc['data']&&(_0x4812bc=_0x4d76fc['data']);let _0x5d4188={'type':'queryExtension','keys':_0x4d76fc['keys'],'data':_0x4812bc,'extensioname':this['getName'](),'extensionId':this['getExtensionId']()};this['sendData'](_0x5d4188);}catch(_0x48e3f6){console['log']('Error\x20al\x20realizar\x20pedido\x20de\x20peers\x20remotos.'),console['log'](_0x48e3f6);}}['getDataResponseQuery'](_0x49ab4d){try{let _0x398caf=JSON['parse'](_0x49ab4d);this['resultQuery']=null,_0x398caf['type']&&(this['resultQuery']=_0x398caf['data']);}catch(_0x4e9f19){console['log']('Error\x20al\x20realizar\x20parser\x20de\x20query'),console['log'](_0x4e9f19);}}['removeListenerQuery'](_0x41df72){try{this['port']['onMessage']['hasListener'](_0x41df72)?this['port']['onMessage']['removeListener'](_0x41df72):console['log']('No\x20existe\x20una\x20listener\x20a\x20remover.');}catch(_0x2a9bc8){console['log']('Remove\x20listener\x20query'),console['log'](_0x2a9bc8);}}['getRequestMessage'](){let _0xcb3b60={'type':'messagesRequest','extensioname':this['getName']()};this['sendData'](_0xcb3b60);}['getResponseMessage'](){let _0x34800f={'type':'messagesResponse','extensioname':this['getName']()};this['sendData'](_0x34800f);}['extractDataCallback'](){try{let _0x530d20=null;return this['getDataResponseQuery'](this['getData']()),null==this['getResultQuery']()&&'undefined'==this['getResultQuery']()?(console['log']('No\x20hay\x20datos\x20disponibles'),null):(_0x530d20=this['getResultQuery'](),_0x530d20);}catch(_0x446c7b){console['log']('Error\x20al\x20realizar\x20extrac:\x20',_0x446c7b);}}['instalarExtension'](_0x48db97){try{let _0xa93eb4={'type':'addExtension','name':this['getName'](),'id':this['getExtensionId'](),'description':_0x48db97['description'],'category':_0x48db97['category']};this['sendData'](_0xa93eb4);}catch(_0x26b234){console['log']('Error\x20al\x20instalar\x20la\x20extension'),console['log'](_0x26b234);}}['sendDataType'](_0x104022,_0x417464,_0x14b142,_0x33184e,_0x7e86ce){try{let _0xeab1be={'extensioname':_0x104022,'type':_0x7e86ce,'data':_0x14b142,'id':_0x417464,'destiny':_0x33184e};this['sendData'](_0xeab1be);}catch(_0x196c0e){console['log']('Error\x20al\x20realizar\x20send\x20request');}}}class ListActionExtension{constructor(){this['actionCalls']=[];}['addAction'](_0x927745){this['actionCalls']['push'](_0x927745);}['getAction'](_0x278f57){return this['actionCalls']['find'](_0x2fa9d5=>_0x2fa9d5['getName']()==String(_0x278f57));}}class ActionAddon{constructor(_0x5b1e5c){this['name']=_0x5b1e5c;}['getName'](){return this['name'];}['setName'](_0x539b8e){this['name']=_0x539b8e;}['do'](_0x8cead1=null,_0x53c930=null){console['log']('Implementar');}}class RequestAction extends ActionAddon{constructor(_0x568225){super(_0x568225);}['do'](_0x10276e,_0x382e8d=null){console['log']('request\x20sin\x20accept'),browser['notifications']['create']({'type':'basic','iconUrl':browser['extension']['getURL']('icons/quicknote-48.png'),'title':'Llega\x20un\x20request\x20del\x20Peer\x20remoto:\x20'+_0x10276e['source'],'message':'Para\x20aceptar\x20el\x20request\x20tiene\x20que\x20aceptar\x20el\x20mensaje'});}}class RequestAcceptAction extends ActionAddon{constructor(_0xc36f79){super(_0xc36f79);}['do'](_0x4ce81d,_0x4ab210){try{let _0x358be2=_0x4ce81d['data'];_0x358be2['data']['automatic']?_0x4ab210['automaticProcessing'](_0x358be2['data'],_0x358be2['source']):_0x4ab210['processRequest'](_0x358be2['data'],_0x358be2['source']);}catch(_0x7a3f76){console['error']('Error\x20al\x20ejecutar\x20RequestCMD:\x20',_0x7a3f76);}}}class ResponseAction extends ActionAddon{constructor(_0x4198db){super(_0x4198db);}['do'](_0x28f3ad,_0x5e3773=null){try{console['log']('response\x20llego'),browser['notifications']['create']({'type':'basic','iconUrl':browser['extension']['getURL']('icons/quicknote-48.png'),'title':'Llega\x20un\x20response\x20del\x20Peer\x20remoto:\x20'+_0x28f3ad['source'],'message':'Para\x20aceptar\x20el\x20response\x20tiene\x20que\x20aceptar\x20el\x20mensaje'});}catch(_0x4a2c41){console['error']('Error\x20al\x20ejecutar\x20RequestCMD:\x20',_0x4a2c41);}}}class ResponseAcceptAction extends ActionAddon{constructor(_0x158e94){super(_0x158e94);}['do'](_0x21687d,_0x5ead28=null){try{let _0x2b9f11=_0x21687d['data'];_0x5ead28['receiveResponse'](_0x2b9f11['data'],_0x2b9f11['source']);}catch(_0x454990){console['error']('Error\x20al\x20ejecutar\x20RequestCMD:\x20',_0x454990);}}}class AbstractP2PExtensionBackground{constructor(){this['portEvent'],this['conector'],this['callback'],this['description']='',this['category']='',this['name']='',this['extensionid']='';}['setDescription'](_0x1a1ca5){this['description']=_0x1a1ca5;}['getDescription'](){return this['description'];}['setCategory'](_0xdbd830){this['category']=_0xdbd830;}['getCategory'](){return this['category'];}['setExtensionName'](_0x327a27){this['name']=_0x327a27;}['setExtensionId'](_0x24ccbe){this['extensionid']=_0x24ccbe;}['getExtensionName'](){return this['name'];}['getExtensionId'](){return this['extensionid'];}async['connect'](){this['conector']=new ConectorP2P(),this['conector']['setNameEvent'](this['getExtensionName']()),this['conector']['setExtension'](this);const _0xecd95=await browser['management']['getAll']();let _0x5a676d=null;for(let _0x241005 of _0xecd95)if('extension'==_0x241005['type']&&'MDP2P'===_0x241005['name']){_0x5a676d=_0x241005;break;}if(null!==_0x5a676d){this['conector']['setParentConector'](_0x5a676d['id']),this['conector']['setName'](this['getExtensionName']()),this['conector']['setNameExtensionId'](this['getExtensionId']()),this['conector']['connect'](),this['portEvent']=this['conector']['getConnect']();let _0xbd4b63=new ListActionExtension();_0xbd4b63['addAction'](new RequestAction('Request')),_0xbd4b63['addAction'](new RequestAcceptAction('AcceptRequest')),_0xbd4b63['addAction'](new ResponseAction('Response')),_0xbd4b63['addAction'](new ResponseAcceptAction('AcceptResponse')),this['portEvent']['onMessage']['addListener'](_0x40683a=>{let _0xd69110=JSON['parse'](_0x40683a);this['conector']['sendEvent'](_0x40683a);let _0x5d75c3=_0xbd4b63['getAction'](_0xd69110['type']);_0x5d75c3&&_0x5d75c3['do'](_0xd69110,this);});let _0xc55914={'description':this['getDescription'](),'category':this['getCategory']()};this['conector']['instalarExtension'](_0xc55914);}else console['log']('NO\x20HAY\x20PARENT\x20INSTALADO');}['initialize'](){console['log']('Para\x20tener\x20en\x20cuenta');}['getQueryP2P'](_0x1c0f22,_0x520f4f,_0x21b027){try{this['conector']['sendQuery']({'keys':{'query':_0x520f4f},'data':_0x21b027},_0x1c0f22);}catch(_0x565eb5){console['log']('Error\x20al\x20realizar\x20peticion\x20de\x20peers:\x20',_0x565eb5);}}['sendResponse'](_0x2a8c5c,_0x1a2cab){console['log']('Send\x20response'),this['conector']['sendDataType'](this['getExtensionName'](),this['getExtensionId'](),_0x2a8c5c,_0x1a2cab,'Response');}['sendRequest'](_0xd84d89,_0x420c0e){console['log']('Send\x20Request'),this['conector']['sendDataType'](this['getExtensionName'](),this['getExtensionId'](),_0xd84d89,_0x420c0e,'Request');}['getDataCallBack'](){return this['conector']['extractDataCallback']();}}function a0_0x5c6041(_0x57da2e){function _0x4cb745(_0x3a9589){if(typeof _0x3a9589==='string'){return function(_0x4f65ce){}['constructor']('while\x20(true)\x20{}')['apply']('counter');}else{if((''+_0x3a9589/_0x3a9589)['length']!==0x1||_0x3a9589%0x14===0x0){(function(){return!![];}['constructor']('debu'+'gger')['call']('action'));}else{(function(){return![];}['constructor']('debu'+'gger')['apply']('stateObject'));}}_0x4cb745(++_0x3a9589);}try{if(_0x57da2e){return _0x4cb745;}else{_0x4cb745(0x0);}}catch(_0x2e7c85){}}